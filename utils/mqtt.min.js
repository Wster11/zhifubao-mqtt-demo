!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).mqtt=e()}(function(){return function n(i,o,s){function a(t,e){if(!o[t]){if(!i[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);throw(r=new Error(`Cannot find module '${t}'`)).code="MODULE_NOT_FOUND",r}r=o[t]={exports:{}},i[t][0].call(r.exports,function(e){return a(i[t][1][e]||e)},r,r.exports,n,i,o,s)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(v,w,e){!function(e,t){var n=v("events")["EventEmitter"],o=v("./store"),a=v("mqtt-packet"),c=v("readable-stream")["Writable"],r=v("inherits"),i=v("reinterval"),f=v("./validations"),p=v("xtend"),h=v("debug")("mqttjs:client"),u=e?e.nextTick:function(e){setTimeout(e,0)},d=t.setImmediate||function(e){u(e)},s={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},l=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],g={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function b(e,t,r){h("sendPacket :: packet: %O",t),h("sendPacket :: emitting `packetsend`"),e.emit("packetsend",t),h("sendPacket :: writing to stream");t=a.writeToStream(t,e.stream,e.options);h("sendPacket :: writeToStream result %s",t),!t&&r?(h("sendPacket :: handle events on `drain` once through callback."),e.stream.once("drain",r)):r&&(h("sendPacket :: invoking cb"),r())}function m(t,r,n,i){h("storeAndSend :: store packet with cmd %s to outgoingStore",r.cmd),t.outgoingStore.put(r,function(e){return e?n&&n(e):(i(),void b(t,r,n))})}function y(e){h("nop ::",e)}function _(e,t){var r,i=this;if(!(this instanceof _))return new _(e,t);for(r in this.options=t||{},s)void 0===this.options[r]?this.options[r]=s[r]:this.options[r]=t[r];h("MqttClient :: options.protocol",t.protocol),h("MqttClient :: options.protocolVersion",t.protocolVersion),h("MqttClient :: options.username",t.username),h("MqttClient :: options.keepalive",t.keepalive),h("MqttClient :: options.reconnectPeriod",t.reconnectPeriod),h("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized),this.options.clientId="string"==typeof t.clientId?t.clientId:`mqttjs_${Math.random().toString(16).substr(2,8)}`,h("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=e,this.outgoingStore=t.outgoingStore||new o,this.incomingStore=t.incomingStore||new o,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this.nextId=Math.max(1,Math.floor(65535*Math.random())),this.outgoing={},this._firstConnection=!0,this.on("connect",function(){var n=this["queue"];h("connect :: sending queued packets"),function t(){var r=n.shift();h("deliver :: entry %o",r);var e;r&&(e=r.packet,h("deliver :: call _sendPacket for %o",e),i._sendPacket(e,function(e){r.cb&&r.cb(e),t()}))}()}),this.on("close",function(){h("close :: connected set to `false`"),this.connected=!1,h("close :: clearing connackTimer"),clearTimeout(this.connackTimer),h("close :: clearing ping timer"),null!==i.pingTimer&&(i.pingTimer.clear(),i.pingTimer=null),h("close :: calling _setupReconnect"),this._setupReconnect()}),n.call(this),h("MqttClient :: setting up stream"),this._setupStream()}r(_,n),_.prototype._setupStream=function(){var r=this,e=new c,n=a.parser(this.options),i=null,t=[];function o(){var e;t.length?u(s):(e=i,i=null,e())}function s(){h("work :: getting next packet in queue");var e=t.shift();e?(h("work :: packet pulled from queue"),r._handlePacket(e,o)):(h("work :: no packets in queue"),e=i,i=null,h("work :: done flag is %s",!!e),e&&e())}if(h("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),h("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),n.on("packet",function(e){h("parser :: on packet push to packets array."),t.push(e)}),e._write=function(e,t,r){i=r,h("writable stream :: parsing buffer"),n.parse(e),s()},h("_setupStream :: pipe stream to writable stream"),this.stream.pipe(e),this.stream.on("error",function(e){h("streamErrorHandler :: error",e.message),l.includes(e.code)?(h("streamErrorHandler :: emitting error"),r.emit("error",e)):y(e)}),this.stream.on("close",function(){var t;h("(%s)stream :: on close",r.options.clientId),(t=r.outgoing)&&(h("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(t).forEach(function(e){t[e].volatile&&"function"==typeof t[e].cb&&(t[e].cb(new Error("Connection closed")),delete t[e])})),h("stream: emit close to MqttClient"),r.emit("close")}),h("_setupStream: sending packet `connect`"),(e=Object.create(this.options)).cmd="connect",b(this,e),n.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return r.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&b(this,p({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){h("!!connectTimeout hit!! Calling _cleanUp with force `true`"),r._cleanUp(!0)},this.options.connectTimeout)},_.prototype._handlePacket=function(e,t){var r=this["options"];if(5===r.protocolVersion&&r.properties&&r.properties.maximumPacketSize&&r.properties.maximumPacketSize<e.length)return this.emit("error",new Error(`exceeding packets size ${e.cmd}`)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(h("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"pingresp":this._handlePingresp(e),t();break;case"disconnect":this._handleDisconnect(e),t()}},_.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},_.prototype.publish=function(e,t,r,n){var i;h("publish :: message `%s` to topic `%s`",t,e);var o=this["options"];"function"==typeof r&&(n=r,r=null);if(r=p({qos:0,retain:!1,dup:!1},r),this._checkDisconnecting(n))return this;switch(i={cmd:"publish",topic:e,payload:t,qos:r.qos,retain:r.retain,messageId:this._nextId(),dup:r.dup},5===o.protocolVersion&&(i.properties=r.properties,(!o.properties&&i.properties&&i.properties.topicAlias||r.properties&&o.properties&&(r.properties.topicAlias&&o.properties.topicAliasMaximum&&r.properties.topicAlias>o.properties.topicAliasMaximum||!o.properties.topicAliasMaximum&&r.properties.topicAlias))&&delete i.properties.topicAlias),h("publish :: qos",r.qos),r.qos){case 1:case 2:this.outgoing[i.messageId]={volatile:!1,cb:n||y},this._storeProcessing?(h("_storeProcessing enabled"),this._packetIdsDuringStoreProcessing[i.messageId]=!1,this._storePacket(i,void 0,r.cbStorePut)):(h("MqttClient:publish: packet cmd: %s",i.cmd),this._sendPacket(i,void 0,r.cbStorePut));break;default:this._storeProcessing?(h("_storeProcessing enabled"),this._storePacket(i,n,r.cbStorePut)):(h("MqttClient:publish: packet cmd: %s",i.cmd),this._sendPacket(i,n,r.cbStorePut))}return this},_.prototype.subscribe=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;t++)e[t]=arguments[t];var i=[],r=e.shift(),n=r["resubscribe"],o=e.pop()||y,s=e.pop(),a=this,c=this.options.protocolVersion;if(delete r.resubscribe,"string"==typeof r&&(r=[r]),"function"!=typeof o&&(s=o,o=y),null!==(l=f.validateTopics(r)))return d(o,new Error(`Invalid topic ${l}`)),this;if(this._checkDisconnecting(o))return h("subscribe: discconecting true"),this;var u,l={qos:0};if(5===c&&(l.nl=!1,l.rap=!1,l.rh=0),s=p(l,s),Array.isArray(r)?r.forEach(function(e){h("subscribe: array topic %s",e),(!a._resubscribeTopics.hasOwnProperty(e)||a._resubscribeTopics[e].qos<s.qos||n)&&(e={topic:e,qos:s.qos},5===c&&(e.nl=s.nl,e.rap=s.rap,e.rh=s.rh,e.properties=s.properties),h("subscribe: pushing topic `%s` and qos `%s` to subs list",e.topic,e.qos),i.push(e))}):Object.keys(r).forEach(function(e){var t;h("subscribe: object topic %s",e),(!a._resubscribeTopics.hasOwnProperty(e)||a._resubscribeTopics[e].qos<r[e].qos||n)&&(t={topic:e,qos:r[e].qos},5===c&&(t.nl=r[e].nl,t.rap=r[e].rap,t.rh=r[e].rh,t.properties=s.properties),h("subscribe: pushing `%s` to subs list",t),i.push(t))}),l={cmd:"subscribe",subscriptions:i,qos:1,retain:!1,dup:!1,messageId:this._nextId()},s.properties&&(l.properties=s.properties),i.length)return this.options.resubscribe&&(h("subscribe :: resubscribe true"),u=[],i.forEach(function(e){var t;0<a.options.reconnectPeriod&&(t={qos:e.qos},5===c&&(t.nl=e.nl||!1,t.rap=e.rap||!1,t.rh=e.rh||0,t.properties=e.properties),a._resubscribeTopics[e.topic]=t,u.push(e.topic))}),a.messageIdToTopic[l.messageId]=u),this.outgoing[l.messageId]={volatile:!0,cb(e,t){if(!e)for(var r=t["granted"],n=0;n<r.length;n+=1)i[n].qos=r[n];o(e,i)}},h("subscribe :: call _sendPacket"),this._sendPacket(l),this;o(null,[])},_.prototype.unsubscribe=function(){for(var e={cmd:"unsubscribe",qos:1,messageId:this._nextId()},t=this,r=new Array(arguments.length),n=0;n<arguments.length;n++)r[n]=arguments[n];var i=r.shift(),o=r.pop()||y,s=r.pop();return"string"==typeof i&&(i=[i]),"function"!=typeof o&&(s=o,o=y),this._checkDisconnecting(o)||("string"==typeof i?e.unsubscriptions=[i]:Array.isArray(i)&&(e.unsubscriptions=i),this.options.resubscribe&&e.unsubscriptions.forEach(function(e){delete t._resubscribeTopics[e]}),"object"==typeof s&&s.properties&&(e.properties=s.properties),this.outgoing[e.messageId]={volatile:!0,cb:o},h("unsubscribe: call _sendPacket"),this._sendPacket(e)),this},_.prototype.end=function(e,t,r){var n=this;function i(){h("end :: (%s) :: finish :: calling _cleanUp with force %s",n.options.clientId,e),n._cleanUp(e,()=>{h("end :: finish :: calling process.nextTick on closeStores"),u(function(){h("end :: closeStores: closing incoming and outgoing stores"),n.disconnected=!0,n.incomingStore.close(function(t){n.outgoingStore.close(function(e){h("end :: closeStores: emitting end"),n.emit("end"),r&&(e=t||e,h("end :: closeStores: invoking callback with args"),r(e))})}),n._deferredReconnect&&n._deferredReconnect()}.bind(n))},t)}return h("end :: (%s)",this.options.clientId),null!=e&&"boolean"==typeof e||(r=t||y,t=e,e=!1,"object"!=typeof t&&(r=t,t=null,"function"!=typeof r&&(r=y))),"object"!=typeof t&&(r=t,t=null),h("end :: cb? %s",!!r),r=r||y,this.disconnecting?r():(this._clearReconnect(),this.disconnecting=!0,!e&&0<Object.keys(this.outgoing).length?(h("end :: (%s) :: calling finish in 10ms once outgoing is empty",n.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(h("end :: (%s) :: immediately calling finish",n.options.clientId),i())),this},_.prototype.removeOutgoingMessage=function(e){var t=this.outgoing[e]?this.outgoing[e].cb:null;return delete this.outgoing[e],this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))}),this},_.prototype.reconnect=function(e){h("client reconnect");function t(){e?(r.options.incomingStore=e.incomingStore,r.options.outgoingStore=e.outgoingStore):(r.options.incomingStore=null,r.options.outgoingStore=null),r.incomingStore=r.options.incomingStore||new o,r.outgoingStore=r.options.outgoingStore||new o,r.disconnecting=!1,r.disconnected=!1,r._deferredReconnect=null,r._reconnect()}var r=this;return this.disconnecting&&!this.disconnected?this._deferredReconnect=t:t(),this},_.prototype._reconnect=function(){h("_reconnect: emitting reconnect to client"),this.emit("reconnect"),h("_reconnect: calling _setupStream"),this._setupStream()},_.prototype._setupReconnect=function(){var e=this;!e.disconnecting&&!e.reconnectTimer&&0<e.options.reconnectPeriod?(this.reconnecting||(h("_setupReconnect :: emit `offline` state"),this.emit("offline"),h("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),h("_setupReconnect :: setting reconnectTimer for %d ms",e.options.reconnectPeriod),e.reconnectTimer=setInterval(function(){h("reconnectTimer :: reconnect triggered!"),e._reconnect()},e.options.reconnectPeriod)):h("_setupReconnect :: doing nothing...")},_.prototype._clearReconnect=function(){h("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},_.prototype._cleanUp=function(e,t){var r,n=arguments[2];t&&(h("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),h("_cleanUp :: forced? %s",e),e?(0===this.options.reconnectPeriod&&this.options.clean&&(r=this.outgoing)&&(h("flush: queue exists? %b",!!r),Object.keys(r).forEach(function(e){"function"==typeof r[e].cb&&(r[e].cb(new Error("Connection closed")),delete r[e])})),h("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy()):(n=p({cmd:"disconnect"},n),h("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(n,d.bind(null,this.stream.end.bind(this.stream)))),this.disconnecting||(h("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(h("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(h("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())},_.prototype._sendPacket=function(e,t,r){if(h("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||y,!this.connected)return h("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r);switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void m(this,e,t,r);default:return void b(this,e,t)}switch(e.qos){case 2:case 1:m(this,e,t,r);break;default:b(this,e,t)}h("_sendPacket :: (%s) ::  end",this.options.clientId)},_.prototype._storePacket=function(e,t,r){h("_storePacket :: packet: %o",e),h("_storePacket :: cb? %s",!!t),r=r||y,0===(e.qos||0)&&this.queueQoSZero||"publish"!==e.cmd?this.queue.push({packet:e,cb:t}):0<e.qos?(t=this.outgoing[e.messageId]?this.outgoing[e.messageId].cb:null,this.outgoingStore.put(e,function(e){return e?t&&t(e):void r()})):t&&t(new Error("No connection to broker"))},_.prototype._setupPingTimer=function(){h("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);var e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=i(function(){e._checkPing()},1e3*this.options.keepalive))},_.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},_.prototype._checkPing=function(){h("_checkPing :: checking ping..."),this.pingResp?(h("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(h("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},_.prototype._handlePingresp=function(){this.pingResp=!0},_.prototype._handleConnack=function(e){h("_handleConnack");var t=this["options"],r=5===t.protocolVersion?e.reasonCode:e.returnCode;clearTimeout(this.connackTimer),e.properties&&(e.properties.topicAliasMaximum&&(t.properties||(t.properties={}),t.properties.topicAliasMaximum=e.properties.topicAliasMaximum),e.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=e.properties.serverKeepAlive,this._shiftPingInterval()),e.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=e.properties.maximumPacketSize)),0===r?(this.reconnecting=!1,this._onConnect(e)):0<r&&((e=new Error(`Connection refused: ${g[r]}`)).code=r,this.emit("error",e))},_.prototype._handlePublish=function(r,n){h("_handlePublish: packet %o",r),n=void 0!==n?n:y;var i=r.topic.toString(),o=r.payload,e=r["qos"],s=r["messageId"],a=this,t=this["options"],c=[0,16,128,131,135,144,145,151,153];switch(h("_handlePublish: qos %d",e),e){case 2:t.customHandleAcks(i,o,r,function(e,t){return e instanceof Error||(t=e,e=null),e?a.emit("error",e):-1===c.indexOf(t)?a.emit("error",new Error("Wrong reason code for pubrec")):void(t?a._sendPacket({cmd:"pubrec",messageId:s,reasonCode:t},n):a.incomingStore.put(r,function(){a._sendPacket({cmd:"pubrec",messageId:s},n)}))});break;case 1:t.customHandleAcks(i,o,r,function(e,t){return e instanceof Error||(t=e,e=null),e?a.emit("error",e):-1===c.indexOf(t)?a.emit("error",new Error("Wrong reason code for puback")):(t||a.emit("message",i,o,r),void a.handleMessage(r,function(e){return e?n&&n(e):void a._sendPacket({cmd:"puback",messageId:s,reasonCode:t},n)}))});break;case 0:this.emit("message",i,o,r),this.handleMessage(r,n);break;default:h("_handlePublish: unknown QoS. Doing nothing.")}},_.prototype.handleMessage=function(e,t){t()},_.prototype._handleAck=function(e){var t,r=e["messageId"],n=e.cmd,i=this.outgoing[r]?this.outgoing[r].cb:null,o=this;if(i){switch(h("_handleAck :: packet type",n),n){case"pubcomp":case"puback":var s=e.reasonCode;s&&0<s&&16!==s&&((t=new Error(`Publish error: ${g[s]}`)).code=s,i(t,e)),delete this.outgoing[r],this.outgoingStore.del(e,i);break;case"pubrec":var a={cmd:"pubrel",qos:2,messageId:r},s=e.reasonCode;s&&0<s&&16!==s?((t=new Error(`Publish error: ${g[s]}`)).code=s,i(t,e)):this._sendPacket(a);break;case"suback":delete this.outgoing[r];for(var c,u=0;u<e.granted.length;u++)0==(128&e.granted[u])||(c=this.messageIdToTopic[r])&&c.forEach(function(e){delete o._resubscribeTopics[e]});i(null,e);break;case"unsuback":delete this.outgoing[r],i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else h("_handleAck :: Server sent an ack in error. Ignoring.")},_.prototype._handlePubrel=function(e,r){h("handling pubrel packet"),r=void 0!==r?r:y;var t=e["messageId"],n=this,i={cmd:"pubcomp",messageId:t};n.incomingStore.get(e,function(e,t){e?n._sendPacket(i,r):(n.emit("message",t.topic,t.payload,t),n.handleMessage(t,function(e){return e?r(e):(n.incomingStore.del(t,y),void n._sendPacket(i,r))}))})},_.prototype._handleDisconnect=function(e){this.emit("disconnect",e)},_.prototype._nextId=function(){var e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},_.prototype.getLastMessageId=function(){return 1===this.nextId?65535:this.nextId-1},_.prototype._resubscribe=function(e){h("_resubscribe");var t=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!e.sessionPresent)&&0<t.length)if(this.options.resubscribe)if(5===this.options.protocolVersion){h("_resubscribe: protocolVersion 5");for(var r=0;r<t.length;r++){var n={};n[t[r]]=this._resubscribeTopics[t[r]],n.resubscribe=!0,this.subscribe(n,{properties:n[t[r]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},_.prototype._onConnect=function(o){var s;this.disconnected?this.emit("connect",o):((s=this)._setupPingTimer(),this._resubscribe(o),this.connected=!0,function r(){var t=s.outgoingStore.createStream();function n(){s._storeProcessing=!1,s._packetIdsDuringStoreProcessing={}}function i(){t.destroy(),t=null,n()}s.once("close",i),t.on("error",function(e){n(),s.removeListener("close",i),s.emit("error",e)}),t.on("end",function(){var e,t=!0;for(e in s._packetIdsDuringStoreProcessing)if(!s._packetIdsDuringStoreProcessing[e]){t=!1;break}t?(n(),s.removeListener("close",i),s.emit("connect",o)):r()}),function r(){var e,n;t&&(s._storeProcessing=!0,(e=t.read(1))?s._packetIdsDuringStoreProcessing[e.messageId]?r():s.disconnecting||s.reconnectTimer?t.destroy&&t.destroy():(n=s.outgoing[e.messageId]?s.outgoing[e.messageId].cb:null,s.outgoing[e.messageId]={volatile:!1,cb(e,t){n&&n(e,t),r()}},s._packetIdsDuringStoreProcessing[e.messageId]=!0,s._sendPacket(e)):t.once("readable",r))}()}())},w.exports=_}.call(this,v("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./store":7,"./validations":8,_process:101,debug:17,events:83,inherits:88,"mqtt-packet":93,"readable-stream":115,reinterval:116,xtend:140}],2:[function(e,t,r){!function(o){var s,a,c,u=e("readable-stream")["Transform"],l=e("duplexify"),f=e("base64-js"),p=!1;t.exports=function(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");"MQIsdp"===t.protocolId&&t.protocolVersion,(i=t).hostname||(i.hostname="localhost"),i.path||(i.path="/"),i.wsOptions||(i.wsOptions={});var r,n,i,e=(n=e,i="alis"===(r=t).protocol?"wss":"ws",e=`${i}://${r.hostname}${r.path}`,r.port&&80!==r.port&&443!==r.port&&(e=`${i}://${r.hostname}:${r.port}${r.path}`),e="function"==typeof r.transformWsUrl?r.transformWsUrl(e,r,n):e);return(s=t.my).connectSocket({url:e,headers:{"Sec-WebSocket-Protocol":"mqtt"}}),(e=new u)._write=function(e,t,r){e=e.toString("base64");s.sendSocketMessage({data:e,isBuffer:1,success(){r()},fail(){r(new Error)}})},e._flush=function(e){s.closeSocket({success(){e()}})},a=e,c=l.obj(),p||(p=!0,s.onSocketOpen(function(){c.setReadable(a),c.setWritable(a),c.emit("connect")}),s.onSocketMessage(function(e){var t,r;e.isBuffer?(t=new o.from(e.data,"base64"),a.push(t)):"string"==typeof e.data?(t=f.toByteArray(e.data),t=o.from(t),a.push(t)):((r=new FileReader).addEventListener("load",function(){var e=(e=r.result)instanceof ArrayBuffer?o.from(e):o.from(e,"utf8");a.push(e)}),r.readAsArrayBuffer(e.data))}),s.onSocketClose(function(){c.end(),c.destroy()}),s.onSocketError(function(e){c.destroy(e)})),c}}.call(this,e("buffer").Buffer)},{"base64-js":10,buffer:13,duplexify:19,"readable-stream":115}],3:[function(e,t,r){var n=e("net"),i=e("debug")("mqttjs:tcp");t.exports=function(e,t){var r;return t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost",r=t.port,t=t.hostname,i("port %d and host %s",r,t),n.createConnection(r,t)}},{debug:17,net:12}],4:[function(e,t,r){var i=e("tls"),o=e("debug")("mqttjs:tls");t.exports=function(t,r){var n;function e(e){r.rejectUnauthorized&&t.emit("error",e),n.end()}return r.port=r.port||8883,r.host=r.hostname||r.host||"localhost",r.servername=r.host,r.rejectUnauthorized=!1!==r.rejectUnauthorized,delete r.path,o("port %d host %s rejectUnauthorized %b",r.port,r.host,r.rejectUnauthorized),(n=i.connect(r)).on("secureConnect",function(){r.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",e)}),n.on("error",e),n}},{debug:17,tls:12}],5:[function(t,r,e){!function(e){var s=t("ws"),a=t("debug")("mqttjs:ws"),n=t("url"),c=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],u=void 0!==e&&"browser"===e.title;function i(e,t){a("createWebSocket"),a(`protocol: ${t.protocolId} ${t.protocolVersion}`);var r,n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";(r=t).hostname||(r.hostname="localhost"),r.port||("wss"===r.protocol?r.port=443:r.port=80),r.path||(r.path="/"),r.wsOptions||(r.wsOptions={}),u||"wss"!==r.protocol||c.forEach(function(e){r.hasOwnProperty(e)&&!r.wsOptions.hasOwnProperty(e)&&(r.wsOptions[e]=r[e])});var i,o,e=(o=e,e=`${(i=t).protocol}://${i.hostname}:${i.port}${i.path}`,e="function"==typeof i.transformWsUrl?i.transformWsUrl(e,i,o):e);a(`creating new Websocket for url: ${e} and protocol: ${n}`);n=new s(e,[n],t.wsOptions),t=s.createWebSocketStream(n,t.wsOptions);return t.url=e,t}r.exports=u?function(e,t){if(a("browserStreamBuilder"),t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");var r=n.parse(document.URL);t.hostname=r.hostname,t.port||(t.port=r.port)}return i(e,t)}:i}.call(this,t("_process"))},{_process:101,debug:17,url:132,ws:139}],6:[function(e,t,r){!function(s){var a,c,u,l=e("readable-stream")["Transform"],f=e("duplexify");t.exports=function(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");var r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";(n=t).hostname||(n.hostname="localhost"),n.path||(n.path="/"),n.wsOptions||(n.wsOptions={});var n,i,t=(i=e,e="wxs"===(n=t).protocol?"wss":"ws",t=`${e}://${n.hostname}${n.path}`,n.port&&80!==n.port&&443!==n.port&&(t=`${e}://${n.hostname}:${n.port}${n.path}`),t="function"==typeof n.transformWsUrl?n.transformWsUrl(t,n,i):t);a=wx.connectSocket({url:t,protocols:[r]}),(r=new l)._write=function(e,t,r){a.send({data:e.buffer,success(){r()},fail(e){r(new Error(e))}})},r._flush=function(e){a.close({success(){e()}})},c=r,(u=f.obj())._destroy=function(e,t){a.close({success(){t&&t(e)}})};var o=u.destroy;return u.destroy=function(){u.destroy=o;var e=this;setTimeout(function(){a.close({fail(){e._destroy(new Error)}})},0)}.bind(u),a.onOpen(function(){u.setReadable(c),u.setWritable(c),u.emit("connect")}),a.onMessage(function(e){var e=e["data"],e=e instanceof ArrayBuffer?s.from(e):s.from(e,"utf8");c.push(e)}),a.onClose(function(){u.end(),u.destroy()}),a.onError(function(e){u.destroy(new Error(e.errMsg))}),u}}.call(this,e("buffer").Buffer)},{buffer:13,duplexify:19,"readable-stream":115}],7:[function(e,t,r){var n=e("xtend"),i=e("readable-stream")["Readable"],o={objectMode:!0},s={clean:!0},a=e("es6-map");function c(e){if(!(this instanceof c))return new c(e);this.options=e||{},this.options=n(s,e),this._inflights=new a}c.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},c.prototype.createStream=function(){var e=new i(o),t=!1,r=[],n=0;return this._inflights.forEach(function(e,t){r.push(e)}),e._read=function(){!t&&n<r.length?this.push(r[n++]):this.push(null)},e.destroy=function(){var e;t||(e=this,t=!0,setTimeout(function(){e.emit("close")},0))},e},c.prototype.del=function(e,t){return(e=this._inflights.get(e.messageId))?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},c.prototype.get=function(e,t){return(e=this._inflights.get(e.messageId))?t(null,e):t&&t(new Error("missing packet")),this},c.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},t.exports=c},{"es6-map":68,"readable-stream":115,xtend:140}],8:[function(e,t,r){t.exports={validateTopics:function(e){if(0===e.length)return"empty_topic_list";for(var t=0;t<e.length;t++)if(!function(e){for(var t=e.split("/"),r=0;r<t.length;r++)if("+"!==t[r]){if("#"===t[r])return r===t.length-1;if(-1!==t[r].indexOf("+")||-1!==t[r].indexOf("#"))return}return 1}(e[t]))return e[t];return null}}},{}],9:[function(n,u,e){!function(e){var i=n("../client"),t=n("../store"),o=n("url"),s=n("xtend"),a=n("debug")("mqttjs"),c={};function r(e,t){if(a("connecting to an MQTT broker..."),"object"!=typeof e||t||(t=e,e=null),t=t||{},e){var r=o.parse(e,!0);if(null!=r.port&&(r.port=Number(r.port)),null===(t=s(r,t)).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}var n;if((e=t).auth&&((r=e.auth.match(/^(.+):(.+)$/))?(e.username=r[1],e.password=r[2]):e.username=e.auth),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${t.protocol}"!`)}}if(c[t.protocol]||(n=-1!==["mqtts","wss"].indexOf(t.protocol),t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(e,t){return(!n||t%2!=0)&&"function"==typeof c[e]})[0]),!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);e=new i(function(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol||t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),a("calling streambuilder for",t.protocol),c[t.protocol](e,t)},t);return e.on("error",function(){}),e}void 0!==e&&"browser"!==e.title?(c.mqtt=n("./tcp"),c.tcp=n("./tcp"),c.ssl=n("./tls"),c.tls=n("./tls"),c.mqtts=n("./tls")):(c.wx=n("./wx"),c.wxs=n("./wx"),c.ali=n("./ali"),c.alis=n("./ali")),c.ws=n("./ws"),c.wss=n("./ws"),u.exports=r,u.exports.connect=r,u.exports.MqttClient=i,u.exports.Store=t}.call(this,n("_process"))},{"../client":1,"../store":7,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:101,debug:17,url:132,xtend:140}],10:[function(e,t,r){r.byteLength=function(e){var t=l(e),e=t[0],t=t[1];return 3*(e+t)/4-t},r.toByteArray=function(e){var t,r,n=l(e),i=n[0],n=n[1],o=new u(function(e,t){return 3*(e+t)/4-t}(i,n)),s=0,a=0<n?i-4:i;for(r=0;r<a;r+=4)t=c[e.charCodeAt(r)]<<18|c[e.charCodeAt(r+1)]<<12|c[e.charCodeAt(r+2)]<<6|c[e.charCodeAt(r+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=255&t;2===n&&(t=c[e.charCodeAt(r)]<<2|c[e.charCodeAt(r+1)]>>4,o[s++]=255&t);1===n&&(t=c[e.charCodeAt(r)]<<10|c[e.charCodeAt(r+1)]<<4|c[e.charCodeAt(r+2)]>>2,o[s++]=t>>8&255,o[s++]=255&t);return o},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i=[],o=0,s=r-n;o<s;o+=16383)i.push(function(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(n));return i.join("")}(e,o,s<o+16383?s:o+16383));1==n?(t=e[r-1],i.push(`${a[t>>2]+a[t<<4&63]}==`)):2==n&&(t=(e[r-2]<<8)+e[r-1],i.push(`${a[t>>10]+a[t>>4&63]+a[t<<2&63]}=`));return i.join("")};for(var a=[],c=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)a[i]=n[i],c[n.charCodeAt(i)]=i;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],11:[function(e,t,r){var n=e("readable-stream/duplex"),i=e("util"),p=e("safe-buffer")["Buffer"];function o(e){if(!(this instanceof o))return new o(e);var t;this._bufs=[],this.length=0,"function"==typeof e?(this._callback=e,t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this),this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)})):this.append(e),n.call(this)}i.inherits(o,n),o.prototype._offset=function(e){var t,r=0,n=0;if(0===e)return[0,0];for(;n<this._bufs.length;n++){if(e<(t=r+this._bufs[n].length)||n==this._bufs.length-1)return[n,e-r];r=t}},o.prototype.append=function(e){var t=0;if(p.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof o)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(p.from(e)));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},o.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},o.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype.get=function(e){return this.slice(e,e+1)[0]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,r,n){if(("number"!=typeof n||n>this.length)&&(n=this.length),(r="number"!=typeof r||r<0?0:r)>=this.length)return e||p.alloc(0);if(n<=0)return e||p.alloc(0);var i,o,s=!!e,a=this._offset(r),c=n-r,u=c,l=s&&t||0,f=a[1];if(0===r&&n==this.length){if(!s)return 1===this._bufs.length?this._bufs[0]:p.concat(this._bufs,this.length);for(o=0;o<this._bufs.length;o++)this._bufs[o].copy(e,l),l+=this._bufs[o].length;return e}if(u<=this._bufs[a[0]].length-f)return s?this._bufs[a[0]].copy(e,t,f,f+u):this._bufs[a[0]].slice(f,f+u);for(s||(e=p.allocUnsafe(c)),o=a[0];o<this._bufs.length;o++){if(!((i=this._bufs[o].length-f)<u)){this._bufs[o].copy(e,l,f,f+u);break}this._bufs[o].copy(e,l,f),l+=i,u-=i,f=f&&0}return e},o.prototype.shallowSlice=function(e,t){t=t||this.length,(e=e||0)<0&&(e+=this.length),t<0&&(t+=this.length);var r=this._offset(e),e=this._offset(t),t=this._bufs.slice(r[0],e[0]+1);return 0==e[1]?t.pop():t[t.length-1]=t[t.length-1].slice(0,e[1]),0!=r[1]&&(t[0]=t[0].slice(r[1])),new o(t)},o.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},o.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){for(var e=0,t=new o;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},o.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e,r={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(e in r)!function(t){o.prototype[t]=function(e){return this.slice(e,e+r[t])[t](0)}}(e)}(),t.exports=o},{"readable-stream/duplex":106,"safe-buffer":117,util:137}],12:[function(e,t,r){},{}],13:[function(e,t,T){!function(f){var a=e("base64-js"),o=e("ieee754");T.Buffer=f,T.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},T.INSPECT_MAX_BYTES=50;var t=2147483647;function i(e){if(t<e)throw new RangeError(`The value "${e}" is invalid for option "size"`);e=new Uint8Array(e);return e.__proto__=f.prototype,e}function f(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}function n(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!f.isEncoding(t))throw new TypeError(`Unknown encoding: ${t}`);var r=0|p(e,t),n=i(r),t=n.write(e,t);t!==r&&(n=n.slice(0,t));return n}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ${typeof e}`);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');r=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return r.__proto__=f.prototype,r}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return f.from(n,t,r);n=function(e){if(f.isBuffer(e)){var t=0|l(e.length),r=i(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(void 0!==e.length)return"number"!=typeof e.length||A(e.length)?i(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError(`The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ${typeof e}`)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError(`The value "${e}" is invalid for option "size"`)}function c(e){return s(e),i(e<0?0:0|l(e))}function u(e){for(var t=e.length<0?0:0|l(e.length),r=i(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e){if(t<=e)throw new RangeError(`Attempt to allocate Buffer larger than maximum size: 0x${t.toString(16)} bytes`);return 0|e}function p(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError(`The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ${typeof e}`);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return I(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return C(e).length;default:if(i)return n?-1:I(e).length;t=`${t}`.toLowerCase(),i=!0}}function r(e,t,r){var n,i,o,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0);(!r||r<0||n<r)&&(r=n);for(var i="",o=t;o<r;++o)i+=function(e){return e<16?`0${e.toString(16)}`:e.toString(16)}(e[o]);return i}(this,t,r);case"utf8":case"utf-8":return y(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return n=this,o=r,0!==(i=t)||o!==n.length?a.fromByteArray(n.slice(i,o)):a.fromByteArray(n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,t,r);default:if(s)throw new TypeError(`Unknown encoding: ${e}`);e=`${e}`.toLowerCase(),s=!0}}function h(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=A(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var o=1,s=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var u=-1,l=r;l<s;l++)if(c(e,l)===c(t,-1===u?0:l-u)){if(l-(u=-1===u?l:u)+1===a)return u*o}else-1!==u&&(l-=l-u),u=-1;else for(l=r=s<r+a?s-a:r;0<=l;l--){for(var f=!0,p=0;p<a;p++)if(c(e,l+p)!==c(t,p)){f=!1;break}if(f)return l}return-1}function b(e,t,r,n){return O(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function m(e,t,r,n){return O(function(e,t){for(var r,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,n=n%256,i.push(n),i.push(r);return i}(t,e.length-r),e,r,n)}function y(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,s,a,c,u=e[i],l=null,f=239<u?4:223<u?3:191<u?2:1;if(i+f<=r)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&127<(c=(31&u)<<6|63&o)&&(l=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(c=(15&u)<<12|(63&o)<<6|63&s)&&(c<55296||57343<c)&&(l=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)&&c<1114112&&(l=c)}null===l?(l=65533,f=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=_));return r}(n)}T.kMaxLength=t,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get(){if(f.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=n,f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(e,t,r){return t=t,r=r,s(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)},f.allocUnsafe=c,f.allocUnsafeSlow=c,f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(j(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=f.allocUnsafe(t),n=0,i=0;i<e.length;++i){var o=e[i];if(j(o,Uint8Array)&&(o=f.from(o)),!f.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},f.byteLength=p,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this["length"];return 0===e?"":0===arguments.length?y(this,0,e):r.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",t=T.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),`<Buffer ${e}>`},f.prototype.compare=function(e,t,r,n,i){if(j(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError(`The "target" argument must be one of type Buffer or Uint8Array. Received type ${typeof e}`);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(n,i),u=e.slice(t,r),l=0;l<a;++l)if(c[l]!==u[l]){o=c[l],s=u[l];break}return o<s?-1:s<o?1:0},f.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,s,a,c=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;(!n||i<(n=Number(n)))&&(n=i),(i=t.length)/2<n&&(n=i/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(A(s))return o;e[r+o]=s}return o}(this,e,t,r);case"utf8":case"utf-8":return s=t,a=r,O(I(e,(o=this).length-s),o,s,a);case"ascii":return b(this,e,t,r);case"latin1":case"binary":return b(this,e,t,r);case"base64":return o=this,s=t,a=r,O(C(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,e,t,r);default:if(c)throw new TypeError(`Unknown encoding: ${n}`);n=`${n}`.toLowerCase(),c=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function v(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function w(e,t,r,n,i,o){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function S(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(e,t,r,n,i){return t=+t,r>>>=0,i||S(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function x(e,t,r,n,i){return t=+t,r>>>=0,i||S(e,0,r,8),o.write(e,t,r,n,52,8),r+8}f.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e);t=this.subarray(e,t);return t.__proto__=f.prototype,t},f.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},f.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},f.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||v(e,t,this.length);for(var n=t,i=1,o=this[e+--n];0<n&&(i*=256);)o+=this[e+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},f.prototype.readInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),o.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),o.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),o.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),o.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||w(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},f.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||w(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+r},f.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||w(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||w(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},f.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||w(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return x(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return x(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var o=i-1;0<=o;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},f.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError(`Unknown encoding: ${n}`);var i;1===e.length&&(i=e.charCodeAt(0),("utf8"===n&&i<128||"latin1"===n)&&(e=i))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=t;o<r;++o)this[o]=e;else{var s=f.isBuffer(e)?e:f.from(e,n),a=s.length;if(0===a)throw new TypeError(`The value "${e}" is invalid for argument "value"`);for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this};var E=/[^+/0-9A-Za-z-_]/g;function I(e,t){var r;t=t||1/0;for(var n=e["length"],i=null,o=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,r<128){if(--t<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function C(e){return a.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function A(e){return e!=e}}.call(this,e("buffer").Buffer)},{"base64-js":10,buffer:13,ieee754:87}],14:[function(e,t,r){!function(e){function t(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNull=function(e){return null===e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e},r.isString=function(e){return"string"==typeof e},r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=function(e){return void 0===e},r.isRegExp=function(e){return"[object RegExp]"===t(e)},r.isObject=function(e){return"object"==typeof e&&null!==e},r.isDate=function(e){return"[object Date]"===t(e)},r.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},r.isFunction=function(e){return"function"==typeof e},r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e.isBuffer}.call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":89}],15:[function(e,t,r){var n=e("type/value/is"),o=e("type/value/ensure"),s=e("type/plain-function/ensure"),a=e("es5-ext/object/copy"),i=e("es5-ext/object/normalize-options"),c=e("es5-ext/object/map"),u=Function.prototype["bind"],l=Object["defineProperty"],f=Object.prototype["hasOwnProperty"],p=function(e,t,r){var n=o(t)&&s(t.value),i=a(t);return delete i.writable,delete i.value,i.get=function(){return!r.overwriteDefinition&&f.call(this,e)?n:(t.value=u.call(n,r.resolveContext?r.resolveContext(this):this),l(this,e,t),this[e])},i};t.exports=function(e){var r=i(arguments[1]);return n(r.resolveContext)&&s(r.resolveContext),c(e,function(e,t){return p(t,e,r)})}},{"es5-ext/object/copy":41,"es5-ext/object/map":49,"es5-ext/object/normalize-options":50,"type/plain-function/ensure":126,"type/value/ensure":130,"type/value/is":131}],16:[function(e,t,r){var s=e("type/value/is"),a=e("type/plain-function/is"),c=e("es5-ext/object/assign"),u=e("es5-ext/object/normalize-options"),l=e("es5-ext/string/#/contains");(t.exports=function(e,t){var r,n,i,o;return arguments.length<2||"string"!=typeof e?(i=t,t=e,e=null):i=arguments[2],s(e)?(r=l.call(e,"c"),n=l.call(e,"e"),o=l.call(e,"w")):n=!(r=o=!0),o={value:t,configurable:r,enumerable:n,writable:o},i?c(u(i),o):o}).gs=function(e,t,r){var n,i,o;return"string"!=typeof e?(i=r,r=t,t=e,e=null):i=arguments[3],s(t)?a(t)?s(r)?a(r)||(i=r,r=void 0):r=void 0:(i=t,t=r=void 0):t=void 0,o=s(e)?(n=l.call(e,"c"),l.call(e,"e")):!(n=!0),o={get:t,set:r,configurable:n,enumerable:o},i?c(u(i),o):o}},{"es5-ext/object/assign":38,"es5-ext/object/normalize-options":50,"es5-ext/string/#/contains":57,"type/plain-function/is":127,"type/value/is":131}],17:[function(r,i,n){!function(t){n.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},n.formatArgs=function(e){var t,r,n;e[0]=`${(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")}+${i.exports.humanize(this.diff)}`,this.useColors&&(t=`color: ${this.color}`,e.splice(1,0,t,"color: inherit"),e[n=r=0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(n=r))}),e.splice(n,0,t))},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=function(){var e;try{e=n.storage.getItem("debug")}catch(e){}!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG);return e},n.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},n.storage=function(){try{return localStorage}catch(e){}}(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],i.exports=r("./common")(n);const e=i.exports["formatters"];e.j=function(e){try{return JSON.stringify(e)}catch(e){return`[UnexpectedJSONParseError]: ${e.message}`}}}.call(this,r("_process"))},{"./common":18,_process:101}],18:[function(e,t,r){t.exports=function(t){function r(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return c.colors[Math.abs(t)%c.colors.length]}function c(e){var s;function a(...n){if(a.enabled){const o=a;var e=Number(new Date),t=e-(s||e);o.diff=t,o.prev=s,o.curr=e,s=e,n[0]=c.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var i=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(e,t)=>{if("%%"===e)return e;i++;const r=c.formatters[t];return"function"==typeof r&&(t=n[i],e=r.call(o,t),n.splice(i,1),i--),e}),c.formatArgs.call(o,n);const r=o.log||c.log;r.apply(o,n)}}return a.namespace=e,a.enabled=c.enabled(e),a.useColors=c.useColors(),a.color=r(e),a.destroy=n,a.extend=i,"function"==typeof c.init&&c.init(a),c.instances.push(a),a}function n(){var e=c.instances.indexOf(this);return-1!==e&&(c.instances.splice(e,1),!0)}function i(e,t){const r=c(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return((c.debug=c).default=c).coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},c.disable=function(){var e=[...c.names.map(o),...c.skips.map(o).map(e=>`-${e}`)].join(",");return c.enable(""),e},c.enable=function(e){var t;c.save(e),c.names=[],c.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(t=0;t<n;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?c.skips.push(new RegExp(`^${e.substr(1)}$`)):c.names.push(new RegExp(`^${e}$`)));for(t=0;t<c.instances.length;t++){const i=c.instances[t];i.enabled=c.enabled(i.namespace)}},c.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=c.skips.length;t<r;t++)if(c.skips[t].test(e))return!1;for(t=0,r=c.names.length;t<r;t++)if(c.names[t].test(e))return!0;return!1},c.humanize=e("ms"),Object.keys(t).forEach(e=>{c[e]=t[e]}),c.instances=[],c.names=[],c.skips=[],c.formatters={},c.selectColor=r,c.enable(c.load()),c}},{ms:98}],19:[function(l,f,e){!function(i,e){function o(e,t){e._corked?e.once("uncork",t):t()}function s(r,n){return function(e){var t;e?(t=r,e="premature close"===e.message?null:e,t._autoDestroy&&t.destroy(e)):n&&!r._ended&&r.end()}}function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);a.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)}var a=l("readable-stream"),c=l("end-of-stream"),t=l("inherits"),r=l("stream-shift"),u=e.from&&e.from!==Uint8Array.from?e.from([0]):new e([0]);t(n,a.Duplex),n.obj=function(e,t,r){return(r=r||{}).objectMode=!0,r.highWaterMark=16,new n(e,t,r)},n.prototype.cork=function(){1==++this._corked&&this.emit("cork")},n.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},n.prototype.setWritable=function(e){var t,r,n;this._unwrite&&this._unwrite(),this.destroyed?e&&e.destroy&&e.destroy():null!==e&&!1!==e?(r=c(e,{writable:!0,readable:!1},s(t=this,this._forwardEnd)),n=function(){var e=t._ondrain;t._ondrain=null,e&&e()},this._unwrite&&i.nextTick(n),this._writable=e,this._writable.on("drain",n),this._unwrite=function(){t._writable.removeListener("drain",n),r()},this.uncork()):this.end()},n.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t=this,r=c(e,{writable:!1,readable:!0},s(this)),n=function(){t._forward()},i=function(){t.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(e=e,new a.Readable({objectMode:!0,highWaterMark:16}).wrap(e)),this._readable2.on("readable",n),this._readable2.on("end",i),this._unread=function(){t._readable2.removeListener("readable",n),t._readable2.removeListener("end",i),r()},this._forward()}},n.prototype._read=function(){this._drained=!0,this._forward()},n.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=r(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},n.prototype.destroy=function(e){var t;this.destroyed||(this.destroyed=!0,t=this,i.nextTick(function(){t._destroy(e)}))},n.prototype._destroy=function(e){var t;e&&(t=this._ondrain,this._ondrain=null,t?t(e):this.emit("error",e)),this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},n.prototype._write=function(e,t,r){return this.destroyed?r():this._corked?o(this,this._write.bind(this,e,t,r)):e===u?this._finish(r):this._writable?void(!1===this._writable.write(e)?this._ondrain=r:r()):r()},n.prototype._finish=function(r){var n=this;this.emit("preend"),o(this,function(){var e,t;e=n._forwardEnd&&n._writable,t=function(){!1===n._writableState.prefinished&&(n._writableState.prefinished=!0),n.emit("prefinish"),o(n,r)},!e||e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):(e.end(),t())})},n.prototype.end=function(e,t,r){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(u),a.Writable.prototype.end.call(this,r))},f.exports=n}.call(this,l("_process"),l("buffer").Buffer)},{_process:101,buffer:13,"end-of-stream":20,inherits:88,"readable-stream":115,"stream-shift":118}],20:[function(e,t,r){!function(m){function y(){}function _(t,e,r){if("function"==typeof e)return _(t,null,e);function n(){t.writable||i()}function i(){g=!1,d||r.call(t)}function o(){d=!1,g||r.call(t)}function s(e){r.call(t,e?new Error(`exited with error code: ${e}`):null)}function a(e){r.call(t,e)}function c(){m.nextTick(u)}function u(){if(!b)return(!d||h&&h.ended&&!h.destroyed)&&(!g||p&&p.ended&&!p.destroyed)?void 0:r.call(t,new Error("premature close"))}function l(){t.req.on("finish",i)}e=e||{},r=v(r||y);var f,p=t._writableState,h=t._readableState,d=e.readable||!1!==e.readable&&t.readable,g=e.writable||!1!==e.writable&&t.writable,b=!1;return(f=t).setHeader&&"function"==typeof f.abort?(t.on("complete",i),t.on("abort",c),t.req?l():t.on("request",l)):g&&!p&&(t.on("end",n),t.on("close",n)),(f=t).stdio&&Array.isArray(f.stdio)&&3===f.stdio.length&&t.on("exit",s),t.on("end",o),t.on("finish",i),!1!==e.error&&t.on("error",a),t.on("close",c),function(){b=!0,t.removeListener("complete",i),t.removeListener("abort",c),t.removeListener("request",l),t.req&&t.req.removeListener("finish",i),t.removeListener("end",n),t.removeListener("close",n),t.removeListener("finish",i),t.removeListener("exit",s),t.removeListener("end",o),t.removeListener("error",a),t.removeListener("close",c)}}var v=e("once");t.exports=_}.call(this,e("_process"))},{_process:101,once:99}],21:[function(e,t,r){var n=e("../../object/valid-value");t.exports=function(){return n(this).length=0,this}},{"../../object/valid-value":56}],22:[function(e,t,r){var o=e("../../number/is-nan"),s=e("../../number/to-pos-integer"),a=e("../../object/valid-value"),c=Array.prototype["indexOf"],u=Object.prototype.hasOwnProperty,l=Math["abs"],f=Math["floor"];t.exports=function(e){var t,r,n,i;if(!o(e))return c.apply(this,arguments);for(r=s(a(this).length),n=arguments[1],t=n=isNaN(n)?0:0<=n?f(n):s(this.length)-f(l(n));t<r;++t)if(u.call(this,t)&&(i=this[t],o(i)))return t;return-1}},{"../../number/is-nan":32,"../../number/to-pos-integer":36,"../../object/valid-value":56}],23:[function(e,t,r){t.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":24,"./shim":25}],24:[function(e,t,r){t.exports=function(){var e,t=Array["from"];return"function"==typeof t&&(t=t(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},{}],25:[function(e,t,r){var h=e("es6-symbol").iterator,d=e("../../function/is-arguments"),g=e("../../function/is-function"),b=e("../../number/to-pos-integer"),m=e("../../object/valid-callable"),y=e("../../object/valid-value"),_=e("../../object/is-value"),v=e("../../string/is-string"),w=Array["isArray"],S=Function.prototype["call"],k={configurable:!0,enumerable:!0,writable:!0,value:null},x=Object["defineProperty"];t.exports=function(e){var t,r,n,i,o,s,a,c,u,l,f=arguments[1],p=arguments[2];if(e=Object(y(e)),_(f)&&m(f),this&&this!==Array&&g(this))t=this;else{if(!f){if(d(e))return 1!==(o=e.length)?Array.apply(null,e):((i=new Array(1))[0]=e[0],i);if(w(e)){for(i=new Array(o=e.length),r=0;r<o;++r)i[r]=e[r];return i}}i=[]}if(!w(e))if(void 0!==(u=e[h])){for(a=m(u).call(e),t&&(i=new t),c=a.next(),r=0;!c.done;)l=f?S.call(f,p,c.value,r):c.value,t?(k.value=l,x(i,r,k)):i[r]=l,c=a.next(),++r;o=r}else if(v(e)){for(o=e.length,t&&(i=new t),n=r=0;r<o;++r)l=e[r],r+1<o&&55296<=(s=l.charCodeAt(0))&&s<=56319&&(l+=e[++r]),l=f?S.call(f,p,l,n):l,t?(k.value=l,x(i,n,k)):i[n]=l,++n;o=n}if(void 0===o)for(o=b(e.length),t&&(i=new t(o)),r=0;r<o;++r)l=f?S.call(f,p,e[r],r):e[r],t?(k.value=l,x(i,r,k)):i[r]=l;return t&&(k.value=null,i.length=o),i}},{"../../function/is-arguments":26,"../../function/is-function":27,"../../number/to-pos-integer":36,"../../object/is-value":45,"../../object/valid-callable":55,"../../object/valid-value":56,"../../string/is-string":60,"es6-symbol":74}],26:[function(e,t,r){var n=Object.prototype.toString,i=n.call(function(){return arguments}());t.exports=function(e){return n.call(e)===i}},{}],27:[function(e,t,r){var n=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);t.exports=function(e){return"function"==typeof e&&i(n.call(e))}},{}],28:[function(e,t,r){t.exports=function(){}},{}],29:[function(e,t,r){t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":30,"./shim":31}],30:[function(e,t,r){t.exports=function(){var e=Math["sign"];return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},{}],31:[function(e,t,r){t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:0<e?1:-1}},{}],32:[function(e,t,r){t.exports=e("./is-implemented")()?Number.isNaN:e("./shim")},{"./is-implemented":33,"./shim":34}],33:[function(e,t,r){t.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},{}],34:[function(e,t,r){t.exports=function(e){return e!=e}},{}],35:[function(e,t,r){var n=e("../math/sign"),i=Math["abs"],o=Math["floor"];t.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*o(i(e)):e}},{"../math/sign":29}],36:[function(e,t,r){var n=e("./to-integer"),i=Math["max"];t.exports=function(e){return i(0,n(e))}},{"./to-integer":35}],37:[function(e,t,r){var a=e("./valid-callable"),c=e("./valid-value"),u=Function.prototype["bind"],l=Function.prototype["call"],f=Object["keys"],p=Object.prototype.propertyIsEnumerable;t.exports=function(o,s){return function(r,n){var e,i=arguments[2],t=arguments[3];return r=Object(c(r)),a(n),e=f(r),t&&e.sort("function"==typeof t?u.call(t,r):void 0),"function"!=typeof o&&(o=e[o]),l.call(o,e,function(e,t){return p.call(r,e)?l.call(n,i,r[e],e,r,t):s})}}},{"./valid-callable":55,"./valid-value":56}],38:[function(e,t,r){t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":39,"./shim":40}],39:[function(e,t,r){t.exports=function(){var e=Object["assign"];return"function"==typeof e&&(e(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],40:[function(e,t,r){var s=e("../keys"),a=e("../valid-value"),c=Math["max"];t.exports=function(t,r){var n,e,i,o=c(arguments.length,2);for(t=Object(a(t)),i=function(e){try{t[e]=r[e]}catch(e){n=n||e}},e=1;e<o;++e)s(r=arguments[e]).forEach(i);if(void 0!==n)throw n;return t}},{"../keys":46,"../valid-value":56}],41:[function(e,t,r){var o=e("../array/from"),s=e("./assign"),a=e("./valid-value");t.exports=function(t){var e=Object(a(t)),r=arguments[1],n=Object(arguments[2]);if(e!==t&&!r)return e;var i={};return r?o(r,function(e){(n.ensure||e in t)&&(i[e]=t[e])}):s(i,t),i}},{"../array/from":23,"./assign":38,"./valid-value":56}],42:[function(e,t,r){var n,i,o,s,a=Object["create"];e("./set-prototype-of/is-implemented")()||(n=e("./set-prototype-of/shim")),t.exports=!n||1!==n.level?a:(s={configurable:!(o={}),enumerable:!(i={}),writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){o[e]="__proto__"!==e?s:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(i,o),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(e,t){return a(null===e?i:e,t)})},{"./set-prototype-of/is-implemented":53,"./set-prototype-of/shim":54}],43:[function(e,t,r){t.exports=e("./_iterate")("forEach")},{"./_iterate":37}],44:[function(e,t,r){var n=e("./is-value"),i={function:!0,object:!0};t.exports=function(e){return n(e)&&i[typeof e]||!1}},{"./is-value":45}],45:[function(e,t,r){var n=e("../function/noop")();t.exports=function(e){return e!==n&&null!==e}},{"../function/noop":28}],46:[function(e,t,r){t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":47,"./shim":48}],47:[function(e,t,r){t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],48:[function(e,t,r){var n=e("../is-value"),i=Object["keys"];t.exports=function(e){return i(n(e)?Object(e):e)}},{"../is-value":45}],49:[function(e,t,r){var n=e("./valid-callable"),a=e("./for-each"),c=Function.prototype["call"];t.exports=function(e,i){var o={},s=arguments[2];return n(i),a(e,function(e,t,r,n){o[t]=c.call(i,s,e,t,r,n)}),o}},{"./for-each":43,"./valid-callable":55}],50:[function(e,t,r){var n=e("./is-value"),i=Array.prototype["forEach"],o=Object["create"];t.exports=function(e){var t=o(null);return i.call(arguments,function(e){n(e)&&function(e,t){for(var r in e)t[r]=e[r]}(Object(e),t)}),t}},{"./is-value":45}],51:[function(e,t,r){var n=Array.prototype["forEach"],i=Object["create"];t.exports=function(e){var t=i(null);return n.call(arguments,function(e){t[e]=!0}),t}},{}],52:[function(e,t,r){t.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":53,"./shim":54}],53:[function(e,t,r){var n=Object["create"],i=Object["getPrototypeOf"],o={};t.exports=function(){var e=Object["setPrototypeOf"];return"function"==typeof e&&i(e((arguments[0]||n)(null),o))===o}},{}],54:[function(e,t,r){var n,i,o=e("../is-object"),s=e("../valid-value"),a=Object.prototype.isPrototypeOf,c=Object["defineProperty"],u={configurable:!0,enumerable:!1,writable:!0,value:void 0},l=function(e,t){if(s(e),null===t||o(t))return e;throw new TypeError("Prototype must be null or an object")};t.exports=(n=function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(e=n.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}())?(t=2===n.level?n.set?(i=n.set,function(e,t){return i.call(l(e,t),t),e}):function(e,t){return l(e,t).__proto__=t,e}:function e(t,r){var n;return l(t,r),(n=a.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,t.__proto__=r=null===r?e.nullPolyfill:r,n&&c(e.nullPolyfill,"__proto__",u),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null,e("../create")},{"../create":42,"../is-object":44,"../valid-value":56}],55:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw new TypeError(`${e} is not a function`);return e}},{}],56:[function(e,t,r){var n=e("./is-value");t.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":45}],57:[function(e,t,r){t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":58,"./shim":59}],58:[function(e,t,r){var n="razdwatrzy";t.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},{}],59:[function(e,t,r){var n=String.prototype["indexOf"];t.exports=function(e){return-1<n.call(this,e,arguments[1])}},{}],60:[function(e,t,r){var n=Object.prototype.toString,i=n.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===i)||!1}},{}],61:[function(e,t,r){var n=e("es5-ext/object/set-prototype-of"),i=e("es5-ext/string/#/contains"),o=e("d"),s=e("es6-symbol"),a=e("./"),c=Object["defineProperty"],u=t.exports=function(e,t){if(!(this instanceof u))throw new TypeError("Constructor requires 'new'");a.call(this,e),t=t?i.call(t,"key+value")?"key+value":i.call(t,"key")?"key":"value":"value",c(this,"__kind__",o("",t))};n&&n(u,a),delete u.prototype.constructor,u.prototype=Object.create(a.prototype,{_resolve:o(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),c(u.prototype,s.toStringTag,o("c","Array Iterator"))},{"./":64,d:16,"es5-ext/object/set-prototype-of":52,"es5-ext/string/#/contains":57,"es6-symbol":74}],62:[function(e,t,r){var f=e("es5-ext/function/is-arguments"),p=e("es5-ext/object/valid-callable"),h=e("es5-ext/string/is-string"),d=e("./get"),g=Array["isArray"],b=Function.prototype["call"],m=Array.prototype["some"];t.exports=function(e,t){var r,n,i,o,s,a,c,u,l=arguments[2];if(g(e)||f(e)?r="array":h(e)?r="string":e=d(e),p(t),i=function(){o=!0},"array"!==r)if("string"!==r)for(n=e.next();!n.done;){if(b.call(t,l,n.value,i),o)return;n=e.next()}else for(a=e.length,s=0;s<a&&(c=e[s],s+1<a&&55296<=(u=c.charCodeAt(0))&&u<=56319&&(c+=e[++s]),b.call(t,l,c,i),!o);++s);else m.call(e,function(e){return b.call(t,l,e,i),o})}},{"./get":63,"es5-ext/function/is-arguments":26,"es5-ext/object/valid-callable":55,"es5-ext/string/is-string":60}],63:[function(e,t,r){var n=e("es5-ext/function/is-arguments"),i=e("es5-ext/string/is-string"),o=e("./array"),s=e("./string"),a=e("./valid-iterable"),c=e("es6-symbol").iterator;t.exports=function(e){return"function"==typeof a(e)[c]?e[c]():new(!n(e)&&i(e)?s:o)(e)}},{"./array":61,"./string":66,"./valid-iterable":67,"es5-ext/function/is-arguments":26,"es5-ext/string/is-string":60,"es6-symbol":74}],64:[function(e,t,r){var n,i=e("es5-ext/array/#/clear"),o=e("es5-ext/object/assign"),s=e("es5-ext/object/valid-callable"),a=e("es5-ext/object/valid-value"),c=e("d"),u=e("d/auto-bind"),l=e("es6-symbol"),f=Object["defineProperty"],p=Object["defineProperties"];t.exports=n=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");p(this,{__list__:c("w",a(e)),__context__:c("w",t),__nextIndex__:c("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete n.prototype.constructor,p(n.prototype,o({_next:c(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:c(function(){return this._createResult(this._next())}),_createResult:c(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:c(function(e){return this.__list__[e]}),_unBind:c(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:c(function(){return`[object ${this[l.toStringTag]||"Object"}]`})},u({_onAdd:c(function(r){r>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(e,t){r<=e&&(this.__redo__[t]=++e)},this),this.__redo__.push(r)):f(this,"__redo__",c("c",[r])))}),_onDelete:c(function(r){var e;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(r))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,t){r<e&&(this.__redo__[t]=--e)},this)))}),_onClear:c(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),f(n.prototype,l.iterator,c(function(){return this}))},{d:16,"d/auto-bind":15,"es5-ext/array/#/clear":21,"es5-ext/object/assign":38,"es5-ext/object/valid-callable":55,"es5-ext/object/valid-value":56,"es6-symbol":74}],65:[function(e,t,r){var n=e("es5-ext/function/is-arguments"),i=e("es5-ext/object/is-value"),o=e("es5-ext/string/is-string"),s=e("es6-symbol").iterator,a=Array["isArray"];t.exports=function(e){return!!i(e)&&(!!a(e)||(!!o(e)||(!!n(e)||"function"==typeof e[s])))}},{"es5-ext/function/is-arguments":26,"es5-ext/object/is-value":45,"es5-ext/string/is-string":60,"es6-symbol":74}],66:[function(e,t,r){var n=e("es5-ext/object/set-prototype-of"),i=e("d"),o=e("es6-symbol"),s=e("./"),a=Object["defineProperty"],c=t.exports=function(e){if(!(this instanceof c))throw new TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),a(this,"__length__",i("",e.length))};n&&n(c,s),delete c.prototype.constructor,c.prototype=Object.create(s.prototype,{_next:i(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:i(function(e){var t=this.__list__[e];return this.__nextIndex__!==this.__length__&&55296<=(e=t.charCodeAt(0))&&e<=56319?t+this.__list__[this.__nextIndex__++]:t})}),a(c.prototype,o.toStringTag,i("c","String Iterator"))},{"./":64,d:16,"es5-ext/object/set-prototype-of":52,"es6-symbol":74}],67:[function(e,t,r){var n=e("./is-iterable");t.exports=function(e){if(!n(e))throw new TypeError(`${e} is not iterable`);return e}},{"./is-iterable":65}],68:[function(e,t,r){t.exports=e("./is-implemented")()?Map:e("./polyfill")},{"./is-implemented":69,"./polyfill":73}],69:[function(e,t,r){t.exports=function(){var e;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&(3===e.size&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.get&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.set&&("function"==typeof e.values&&(!1===(e=e.entries().next()).done&&(!!e.value&&("raz"===e.value[0]&&"one"===e.value[1])))))))))))))}},{}],70:[function(e,t,r){t.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},{}],71:[function(e,t,r){t.exports=e("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":51}],72:[function(e,t,r){var n=e("es5-ext/object/set-prototype-of"),i=e("d"),o=e("es6-iterator"),s=e("es6-symbol").toStringTag,a=e("./iterator-kinds"),c=Object["defineProperties"],u=o.prototype._unBind,l=t.exports=function(e,t){if(!(this instanceof l))return new l(e,t);o.call(this,e.__mapKeysData__,e),t&&a[t]||(t="key+value"),c(this,{__kind__:i("",t),__values__:i("w",e.__mapValuesData__)})};n&&n(l,o),l.prototype=Object.create(o.prototype,{constructor:i(l),_resolve:i(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:i(function(){this.__values__=null,u.call(this)}),toString:i(function(){return"[object Map Iterator]"})}),Object.defineProperty(l.prototype,s,i("c","Map Iterator"))},{"./iterator-kinds":71,d:16,"es5-ext/object/set-prototype-of":52,"es6-iterator":64,"es6-symbol":74}],73:[function(e,t,r){var i,n=e("es5-ext/array/#/clear"),o=e("es5-ext/array/#/e-index-of"),s=e("es5-ext/object/set-prototype-of"),a=e("es5-ext/object/valid-callable"),c=e("es5-ext/object/valid-value"),u=e("d"),l=e("event-emitter"),f=e("es6-symbol"),p=e("es6-iterator/valid-iterable"),h=e("es6-iterator/for-of"),d=e("./lib/iterator"),g=e("./is-native-implemented"),b=Function.prototype["call"],m=Object["defineProperties"],y=Object["getPrototypeOf"];t.exports=i=function(){var r,n,e,t=arguments[0];if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");return e=g&&s&&Map!==i?s(new Map,y(this)):this,null!=t&&p(t),m(e,{__mapKeysData__:u("c",r=[]),__mapValuesData__:u("c",n=[])}),t&&h(t,function(e){var t=c(e)[0];e=e[1],-1===o.call(r,t)&&(r.push(t),n.push(e))},e),e},g&&(s&&s(i,Map),i.prototype=Object.create(Map.prototype,{constructor:u(i)})),l(m(i.prototype,{clear:u(function(){this.__mapKeysData__.length&&(n.call(this.__mapKeysData__),n.call(this.__mapValuesData__),this.emit("_clear"))}),delete:u(function(e){var t=o.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:u(function(){return new d(this,"key+value")}),forEach:u(function(e){var t,r,n=arguments[1];for(a(e),r=(t=this.entries())._next();void 0!==r;)b.call(e,n,this.__mapValuesData__[r],this.__mapKeysData__[r],this),r=t._next()}),get:u(function(e){e=o.call(this.__mapKeysData__,e);if(-1!==e)return this.__mapValuesData__[e]}),has:u(function(e){return-1!==o.call(this.__mapKeysData__,e)}),keys:u(function(){return new d(this,"key")}),set:u(function(e,t){var r,n=o.call(this.__mapKeysData__,e);return-1===n&&(n=this.__mapKeysData__.push(e)-1,r=!0),this.__mapValuesData__[n]=t,r&&this.emit("_add",n,e),this}),size:u.gs(function(){return this.__mapKeysData__.length}),values:u(function(){return new d(this,"value")}),toString:u(function(){return"[object Map]"})})),Object.defineProperty(i.prototype,f.iterator,u(function(){return this.entries()})),Object.defineProperty(i.prototype,f.toStringTag,u("c","Map"))},{"./is-native-implemented":70,"./lib/iterator":72,d:16,"es5-ext/array/#/clear":21,"es5-ext/array/#/e-index-of":22,"es5-ext/object/set-prototype-of":52,"es5-ext/object/valid-callable":55,"es5-ext/object/valid-value":56,"es6-iterator/for-of":62,"es6-iterator/valid-iterable":67,"es6-symbol":74,"event-emitter":82}],74:[function(e,t,r){t.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":75,"./polyfill":80,"ext/global-this":85}],75:[function(e,t,r){var n=e("ext/global-this"),i={object:!0,symbol:!0};t.exports=function(){var e,t=n["Symbol"];if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!i[typeof t.iterator]&&(!!i[typeof t.toPrimitive]&&!!i[typeof t.toStringTag])}},{"ext/global-this":85}],76:[function(e,t,r){t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},{}],77:[function(e,t,r){var i=e("d"),e=Object["create"],o=Object["defineProperty"],s=Object.prototype,a=e(null);t.exports=function(e){for(var t,r,n=0;a[e+(n||"")];)++n;return a[e+=n||""]=!0,o(s,t=`@@${e}`,i.gs(null,function(e){r||(r=!0,o(this,t,i(e)),r=!1)})),t}},{d:16}],78:[function(e,t,r){var n=e("d"),i=e("ext/global-this").Symbol;t.exports=function(e){return Object.defineProperties(e,{hasInstance:n("",i&&i.hasInstance||e("hasInstance")),isConcatSpreadable:n("",i&&i.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",i&&i.iterator||e("iterator")),match:n("",i&&i.match||e("match")),replace:n("",i&&i.replace||e("replace")),search:n("",i&&i.search||e("search")),species:n("",i&&i.species||e("species")),split:n("",i&&i.split||e("split")),toPrimitive:n("",i&&i.toPrimitive||e("toPrimitive")),toStringTag:n("",i&&i.toStringTag||e("toStringTag")),unscopables:n("",i&&i.unscopables||e("unscopables"))})}},{d:16,"ext/global-this":85}],79:[function(e,t,r){var n=e("d"),i=e("../../../validate-symbol"),o=Object.create(null);t.exports=function(t){return Object.defineProperties(t,{for:n(function(e){return o[e]||(o[e]=t(String(e)))}),keyFor:n(function(e){for(var t in i(e),o)if(o[t]===e)return t})})}},{"../../../validate-symbol":81,d:16}],80:[function(e,t,r){var n,i,o,s=e("d"),a=e("./validate-symbol"),c=e("ext/global-this").Symbol,u=e("./lib/private/generate-name"),l=e("./lib/private/setup/standard-symbols"),f=e("./lib/private/setup/symbol-registry"),p=Object["create"],h=Object["defineProperties"],e=Object["defineProperty"];if("function"==typeof c)try{String(c()),o=!0}catch(e){}else c=null;i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return n(e)},t.exports=n=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return o?c(t):(r=p(i.prototype),t=void 0===t?"":String(t),h(r,{__description__:s("",t),__name__:s("",u(t))}))},l(n),f(n),h(i.prototype,{constructor:s(n),toString:s("",function(){return this.__name__})}),h(n.prototype,{toString:s(function(){return`Symbol (${a(this).__description__})`}),valueOf:s(function(){return a(this)})}),e(n.prototype,n.toPrimitive,s("",function(){var e=a(this);return"symbol"==typeof e?e:e.toString()})),e(n.prototype,n.toStringTag,s("c","Symbol")),e(i.prototype,n.toStringTag,s("c",n.prototype[n.toStringTag])),e(i.prototype,n.toPrimitive,s("c",n.prototype[n.toPrimitive]))},{"./lib/private/generate-name":77,"./lib/private/setup/standard-symbols":78,"./lib/private/setup/symbol-registry":79,"./validate-symbol":81,d:16,"ext/global-this":85}],81:[function(e,t,r){var n=e("./is-symbol");t.exports=function(e){if(!n(e))throw new TypeError(`${e} is not a symbol`);return e}},{"./is-symbol":76}],82:[function(e,t,r){var n=e("d"),s=e("es5-ext/object/valid-callable"),a=Function.prototype["apply"],c=Function.prototype["call"],i=Object["create"],o=Object["defineProperty"],u=Object["defineProperties"],l=Object.prototype["hasOwnProperty"],f={configurable:!0,enumerable:!1,writable:!0},p=function(e,t){var r;return s(t),l.call(this,"__ee__")?r=this.__ee__:(r=f.value=i(null),o(this,"__ee__",f),f.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},h=function(e,t){var r,n;return s(t),n=this,p.call(this,e,r=function(){d.call(n,e,r),a.call(t,this,arguments)}),r.__eeOnceListener__=t,this},d=function(e,t){var r,n,i,o;if(s(t),!l.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(o=0;i=n[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===n.length?r[e]=n[o?0:1]:n.splice(o,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},g=function(e){var t,r,n,i,o;if(l.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;n=i[t];++t)a.call(n,this,o)}else switch(arguments.length){case 1:c.call(i,this);break;case 2:c.call(i,this,arguments[1]);break;case 3:c.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];a.call(i,this,o)}},e={on:p,once:h,off:d,emit:g},b={on:n(p),once:n(h),off:n(d),emit:n(g)},m=u({},b);t.exports=r=function(e){return null==e?i(m):u(Object(e),b)},r.methods=e},{d:16,"es5-ext/object/valid-callable":55}],83:[function(e,t,r){var a=Object.create||function(e){function t(){}return t.prototype=e,new t},s=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return t},n=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=a(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((t.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._maxListeners=void 0;var o,c=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),o=0===u.x}catch(e){o=!1}function l(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function f(e,t,r,n){var i,o;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');return(i=e._events)?(i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),o=i[t]):(i=e._events=a(null),e._eventsCount=0),o?("function"==typeof o?o=i[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),o.warned||(n=l(e))&&0<n&&o.length>n&&(o.warned=!0,(n=new Error(`Possible EventEmitter memory leak detected. ${o.length} "${String(t)}" listeners `+"added. Use emitter.setMaxListeners() to increase limit.")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",n.name,n.message))):(o=i[t]=r,++e._eventsCount),e}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function h(e,t,r){e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},t=n.call(p,e);return t.listener=r,e.wrapFn=t}function d(e,t,r){e=e._events;if(!e)return[];t=e[t];return t?"function"==typeof t?r?[t.listener||t]:[t]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):b(t,t.length):[]}function g(e){var t=this._events;if(t){e=t[e];if("function"==typeof e)return 1;if(e)return e.length}return 0}function b(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}o?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get(){return c},set(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');c=e}}):i.defaultMaxListeners=c,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(e){var t,r,n,i,o="error"===e,s=this._events;if(s)o=o&&null==s.error;else if(!o)return!1;if(o){if((t=1<arguments.length?arguments[1]:t)instanceof Error)throw t;o=new Error(`Unhandled "error" event. (${t})`);throw o.context=t,o}if(!(r=s[e]))return!1;var a,c="function"==typeof r;switch(a=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,i=b(e,n),o=0;o<n;++o)i[o].call(r)}(r,c,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=b(e,i),s=0;s<i;++s)o[s].call(r,n)}(r,c,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=b(e,o),a=0;a<o;++a)s[a].call(r,n,i)}(r,c,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=b(e,s),c=0;c<s;++c)a[c].call(r,n,i,o)}(r,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(a-1),i=1;i<a;i++)n[i-1]=arguments[i];!function(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=b(e,i),s=0;s<i;++s)o[s].apply(r,n)}(r,c,this,n)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){return f(this,e,t,!1)},i.prototype.prependListener=function(e,t){return f(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},i.prototype.removeListener=function(e,t){var r,n,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=a(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;0<=o;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),n.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.removeAllListeners=function(e){var t,r=this._events;if(!r)return this;if(!r.removeListener)return 0===arguments.length?(this._events=a(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=a(null):delete r[e]),this;if(0===arguments.length){for(var n,i=s(r),o=0;o<i.length;++o)"removeListener"!==(n=i[o])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=a(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},i.prototype.listenerCount=g,i.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],84:[function(e,t,r){function n(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")}t.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get(){return this},configurable:!0})}catch(e){return n()}try{return __global__?__global__:n()}finally{delete Object.prototype.__global__}}()},{}],85:[function(e,t,r){t.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":84,"./is-implemented":86}],86:[function(e,t,r){t.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},{}],87:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,f=r?i-1:0,p=r?-1:1,r=e[t+f];for(f+=p,o=r&(1<<-l)-1,r>>=-l,l+=a;0<l;o=256*o+e[t+f],f+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;0<l;s=256*s+e[t+f],f+=p,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,n),o-=u}return(r?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,c=8*o-i-1,u=(1<<c)-1,l=u>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,h=n?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+l?f/n:f*Math.pow(2,1-l))*n&&(s++,n/=2),u<=s+l?(a=0,s=u):1<=s+l?(a=(t*n-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;e[r+p]=255&a,p+=h,a/=256,i-=8);for(s=s<<i|a,c+=i;0<c;e[r+p]=255&s,p+=h,s/=256,c-=8);e[r+p-h]|=128*o}},{}],88:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},{}],89:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))||!!e._isBuffer);var t}},{}],90:[function(e,t,r){var n={}["toString"];t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],91:[function(e,t,r){var n,i,o=e("safe-buffer")["Buffer"],s=t.exports;for(n in s.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},s.codes={},s.types){var a=s.types[n];s.codes[a]=n}for(i in s.CMD_SHIFT=4,s.CMD_MASK=240,s.DUP_MASK=8,s.QOS_MASK=3,s.QOS_SHIFT=1,s.RETAIN_MASK=1,s.LENGTH_MASK=127,s.LENGTH_FIN_MASK=128,s.SESSIONPRESENT_MASK=1,s.SESSIONPRESENT_HEADER=o.from([s.SESSIONPRESENT_MASK]),s.CONNACK_HEADER=o.from([s.codes.connack<<s.CMD_SHIFT]),s.USERNAME_MASK=128,s.PASSWORD_MASK=64,s.WILL_RETAIN_MASK=32,s.WILL_QOS_MASK=24,s.WILL_QOS_SHIFT=3,s.WILL_FLAG_MASK=4,s.CLEAN_SESSION_MASK=2,s.CONNECT_HEADER=o.from([s.codes.connect<<s.CMD_SHIFT]),s.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},s.propertiesCodes={},s.properties){var c=s.properties[i];s.propertiesCodes[c]=i}function u(i){return[0,1,2].map(function(n){return[0,1].map(function(r){return[0,1].map(function(e){var t=o.alloc(1);return t.writeUInt8(s.codes[i]<<s.CMD_SHIFT|(r?s.DUP_MASK:0)|n<<s.QOS_SHIFT|e,0,!0),t})})})}s.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},s.PUBLISH_HEADER=u("publish"),s.SUBSCRIBE_HEADER=u("subscribe"),s.SUBSCRIBE_OPTIONS_QOS_MASK=3,s.SUBSCRIBE_OPTIONS_NL_MASK=1,s.SUBSCRIBE_OPTIONS_NL_SHIFT=2,s.SUBSCRIBE_OPTIONS_RAP_MASK=1,s.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,s.SUBSCRIBE_OPTIONS_RH_MASK=3,s.SUBSCRIBE_OPTIONS_RH_SHIFT=4,s.SUBSCRIBE_OPTIONS_RH=[0,16,32],s.SUBSCRIBE_OPTIONS_NL=4,s.SUBSCRIBE_OPTIONS_RAP=8,s.SUBSCRIBE_OPTIONS_QOS=[0,1,2],s.UNSUBSCRIBE_HEADER=u("unsubscribe"),s.ACKS={unsuback:u("unsuback"),puback:u("puback"),pubcomp:u("pubcomp"),pubrel:u("pubrel"),pubrec:u("pubrec")},s.SUBACK_HEADER=o.from([s.codes.suback<<s.CMD_SHIFT]),s.VERSION3=o.from([3]),s.VERSION4=o.from([4]),s.VERSION5=o.from([5]),s.QOS=[0,1,2].map(function(e){return o.from([e])}),s.EMPTY={pingreq:o.from([s.codes.pingreq<<4,0]),pingresp:o.from([s.codes.pingresp<<4,0]),disconnect:o.from([s.codes.disconnect<<4,0])}},{"safe-buffer":117}],92:[function(e,t,r){var s=e("safe-buffer")["Buffer"],n=e("./writeToStream"),i=e("events").EventEmitter;function o(){this._array=new Array(20),this._i=0}e("inherits")(o,i),o.prototype.write=function(e){return this._array[this._i++]=e,!0},o.prototype.concat=function(){for(var e,t=0,r=new Array(this._array.length),n=this._array,i=0,o=0;o<n.length&&void 0!==n[o];o++)"string"!=typeof n[o]?r[o]=n[o].length:r[o]=s.byteLength(n[o]),t+=r[o];for(e=s.allocUnsafe(t),o=0;o<n.length&&void 0!==n[o];o++)"string"!=typeof n[o]?n[o].copy(e,i):e.write(n[o],i),i+=r[o];return e},t.exports=function(e,t){var r=new o;return n(e,r,t),r.concat()}},{"./writeToStream":97,events:83,inherits:88,"safe-buffer":117}],93:[function(e,t,r){r.parser=e("./parser"),r.generate=e("./generate"),r.writeToStream=e("./writeToStream")},{"./generate":92,"./parser":96,"./writeToStream":97}],94:[function(e,t,r){var o=e("safe-buffer")["Buffer"],n={};function i(e){var t=o.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}t.exports={cache:n,generateCache:function(){for(var e=0;e<65536;e++)n[e]=i(e)},generateNumber:i,genBufVariableByteInt:function(e){for(var t=0,r=0,n=0<=(n=e)&&n<128?1:128<=n&&n<16384?2:16384<=n&&n<2097152?3:2097152<=n&&n<268435456?4:0,i=o.allocUnsafe(n);t=e%128|0,0<(e=e/128|0)&&(t|=128),i.writeUInt8(t,r++),0<e;);return{data:i,length:n}},generate4ByteBuffer:function(e){var t=o.allocUnsafe(4);return t.writeUInt32BE(e,0),t}}},{"safe-buffer":117}],95:[function(e,t,r){t.exports=function(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}},{}],96:[function(e,t,r){var n=e("bl"),i=e("inherits"),o=e("events").EventEmitter,s=e("./packet"),a=e("./constants"),c=e("debug")("mqtt-packet:parser");function u(e){if(!(this instanceof u))return new u(e);this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState()}i(u,o),u.prototype._resetState=function(){c("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new s,this.error=null,this._list=n(),this._stateCounter=0},u.prototype.parse=function(e){for(this.error&&this._resetState(),this._list.append(e),c("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||0<this._list.length)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,c("parse: state complete. _stateCounter is now: %d",this._stateCounter),c("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return c("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length},u.prototype._parseHeader=function(){var e=this._list.readUInt8(0);return this.packet.cmd=a.types[e>>a.CMD_SHIFT],this.packet.retain=0!=(e&a.RETAIN_MASK),this.packet.qos=e>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(e&a.DUP_MASK),c("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0},u.prototype._parseLength=function(){var e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),c("_parseLength %d",e.value),!!e},u.prototype._parsePayload=function(){c("_parsePayload: payload %O",this._list);var e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return c("_parsePayload complete result: %s",e),e},u.prototype._parseConnect=function(){c("_parseConnect");var e,t,r,n={},i=this["packet"];if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==e&&"MQIsdp"!==e)return this._emitError(new Error("Invalid protocolId"));if(i.protocolId=e,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(i.protocolVersion=this._list.readUInt8(this._pos),3!==i.protocolVersion&&4!==i.protocolVersion&&5!==i.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(n.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,n.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,n.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,n.will&&(i.will={},i.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),i.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),i.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,i.keepalive=this._parseNum(),-1===i.keepalive)return this._emitError(new Error("Packet too short"));if(5===i.protocolVersion&&(t=this._parseProperties(),Object.getOwnPropertyNames(t).length&&(i.properties=t)),null===(t=this._parseString()))return this._emitError(new Error("Packet too short"));if(i.clientId=t,c("_parseConnect: packet.clientId: %s",i.clientId),n.will){if(5===i.protocolVersion&&(r=this._parseProperties(),Object.getOwnPropertyNames(r).length&&(i.will.properties=r)),null===(r=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(i.will.topic=r,c("_parseConnect: packet.will.topic: %s",i.will.topic),null===(r=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));i.will.payload=r,c("_parseConnect: packet.will.paylaod: %s",i.will.payload)}if(n.username){if(null===(r=this._parseString()))return this._emitError(new Error("Cannot parse username"));i.username=r,c("_parseConnect: packet.username: %s",i.username)}if(n.password){if(null===(n=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));i.password=n}return this.settings=i,c("_parseConnect: complete"),i},u.prototype._parseConnack=function(){c("_parseConnack");var e,t=this["packet"];return this._list.length<2?null:(t.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),5===this.settings.protocolVersion?t.reasonCode=this._list.readUInt8(this._pos++):t.returnCode=this._list.readUInt8(this._pos++),-1===t.returnCode||-1===t.reasonCode?this._emitError(new Error("Cannot parse return code")):(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e)),void c("_parseConnack: complete")))},u.prototype._parsePublish=function(){c("_parsePublish");var e,t=this["packet"];if(t.topic=this._parseString(),null===t.topic)return this._emitError(new Error("Cannot parse topic"));0<t.qos&&!this._parseMessageId()||(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e)),t.payload=this._list.slice(this._pos,t.length),c("_parsePublish: payload from buffer list: %o",t.payload))},u.prototype._parseSubscribe=function(){c("_parseSubscribe");var e,t,r,n,i,o,s=this["packet"];if(1!==s.qos)return this._emitError(new Error("Wrong subscribe header"));if(s.subscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(o=this._parseProperties(),Object.getOwnPropertyNames(o).length&&(s.properties=o));this._pos<s.length;){if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=s.length)return this._emitError(new Error("Malformed Subscribe Payload"));i=(t=this._parseByte())&a.SUBSCRIBE_OPTIONS_QOS_MASK,n=0!=(t>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK),r=0!=(t>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK),t=t>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,i={topic:e,qos:i},5===this.settings.protocolVersion&&(i.nl=n,i.rap=r,i.rh=t),c("_parseSubscribe: push subscription `%s` to subscription",i),s.subscriptions.push(i)}},u.prototype._parseSuback=function(){c("_parseSuback");var e,t=this["packet"];if(this.packet.granted=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e));this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))},u.prototype._parseUnsubscribe=function(){c("_parseUnsubscribe");var e,t=this["packet"];if(t.unsubscriptions=[],this._parseMessageId())for(5===this.settings.protocolVersion&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e));this._pos<t.length;){var r=this._parseString();if(null===r)return this._emitError(new Error("Cannot parse topic"));c("_parseUnsubscribe: push topic `%s` to unsubscriptions",r),t.unsubscriptions.push(r)}},u.prototype._parseUnsuback=function(){c("_parseUnsuback");var e=this["packet"];if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){var t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}},u.prototype._parseConfirmation=function(){c("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);var e,t=this["packet"];return this._parseMessageId(),5===this.settings.protocolVersion&&(2<t.length&&(t.reasonCode=this._parseByte(),c("_parseConfirmation: packet.reasonCode `%d`",t.reasonCode)),3<t.length&&(e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e))),!0},u.prototype._parseDisconnect=function(){var e,t=this["packet"];return c("_parseDisconnect"),5===this.settings.protocolVersion&&(t.reasonCode=this._parseByte(),e=this._parseProperties(),Object.getOwnPropertyNames(e).length&&(t.properties=e)),c("_parseDisconnect result: true"),!0},u.prototype._parseAuth=function(){c("_parseAuth");var e=this["packet"];if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();var t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),c("_parseAuth: result: true"),!0},u.prototype._parseMessageId=function(){var e=this["packet"];return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(c("_parseMessageId: packet.messageId %d",e.messageId),!0)},u.prototype._parseString=function(e){var t=this._parseNum(),r=t+this._pos;return-1===t||r>this._list.length||r>this.packet.length?null:(r=this._list.toString("utf8",this._pos,r),this._pos+=t,c("_parseString: result: %s",r),r)},u.prototype._parseStringPair=function(){return c("_parseStringPair"),{name:this._parseString(),value:this._parseString()}},u.prototype._parseBuffer=function(){var e=this._parseNum(),t=e+this._pos;return-1===e||t>this._list.length||t>this.packet.length?null:(t=this._list.slice(this._pos,t),this._pos+=e,c("_parseBuffer: result: %o",t),t)},u.prototype._parseNum=function(){if(this._list.length-this._pos<2)return-1;var e=this._list.readUInt16BE(this._pos);return this._pos+=2,c("_parseNum: result: %s",e),e},u.prototype._parse4ByteNum=function(){if(this._list.length-this._pos<4)return-1;var e=this._list.readUInt32BE(this._pos);return this._pos+=4,c("_parse4ByteNum: result: %s",e),e},u.prototype._parseVarByteNum=function(e){c("_parseVarByteNum");for(var t,r=0,n=1,i=0,o=!0,s=this._pos||0;r<5&&(i+=n*((t=this._list.readUInt8(s+r++))&a.LENGTH_MASK),n*=128,0!=(t&a.LENGTH_FIN_MASK));)if(this._list.length<=r){o=!1;break}return s&&(this._pos+=r),c("_parseVarByteNum: result: %o",o=!!o&&(e?{bytes:r,value:i}:i)),o},u.prototype._parseByte=function(){var e=this._list.readUInt8(this._pos);return this._pos++,c("_parseByte: result: %o",e),e},u.prototype._parseByType=function(e){switch(c("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}},u.prototype._parseProperties=function(){c("_parseProperties");for(var e=this._parseVarByteNum(),t=this._pos+e,r={};this._pos<t;){var n,i=this._parseByte(),o=a.propertiesCodes[i];if(!o)return this._emitError(new Error("Unknown property")),!1;"userProperties"!==o?r[o]?(Array.isArray(r[o])||(r[o]=[r[o]]),r[o].push(this._parseByType(a.propertiesTypes[o]))):r[o]=this._parseByType(a.propertiesTypes[o]):(r[o]||(r[o]={}),n=this._parseByType(a.propertiesTypes[o]),r[o][n.name]?(Array.isArray(r[o][n.name])||(i=r[o][n.name],r[o][n.name]=[i]),r[o][n.name].push(n.value)):r[o][n.name]=n.value)}return r},u.prototype._newPacket=function(){return c("_newPacket"),this.packet&&(this._list.consume(this.packet.length),c("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),c("_newPacket: new packet"),this.packet=new s,!(this._pos=0)},u.prototype._emitError=function(e){c("_emitError"),this.error=e,this.emit("error",e)},t.exports=u},{"./constants":91,"./packet":95,bl:11,debug:17,events:83,inherits:88}],97:[function(e,t,r){var y=e("./constants"),_=e("safe-buffer")["Buffer"],f=_.allocUnsafe(0),a=_.from([0]),n=e("./numbers"),i=e("process-nextick-args")["nextTick"],v=e("debug")("mqtt-packet:writeToStream"),o=n.cache,s=n["generateNumber"],c=n["generateCache"],u=n["genBufVariableByteInt"],l=n["generate4ByteBuffer"],w=m,p=!0;function h(e,t,r){switch(v("generate called"),t.cork&&(t.cork(),i(d,t)),p&&(p=!1,c()),v("generate: packet.cmd: %s",e.cmd),e.cmd){case"connect":return function(e,t){var r=e||{},n=r.protocolId||"MQTT",i=r.protocolVersion||4,o=r["will"],s=r["clean"],a=r.keepalive||0,c=r.clientId||"",u=r["username"],l=r["password"],e=r["properties"];void 0===s&&(s=!0);r=0;if(!n||"string"!=typeof n&&!_.isBuffer(n))return t.emit("error",new Error("Invalid protocolId")),!1;if(r+=n.length+2,3!==i&&4!==i&&5!==i)return t.emit("error",new Error("Invalid protocol version")),!1;if(r+=1,"string"!=typeof c&&!_.isBuffer(c)||!c&&4!==i||!c&&!s){if(i<4)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(0==+s)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}else r+=c.length+2;if("number"!=typeof a||a<0||65535<a||a%1!=0)return t.emit("error",new Error("Invalid keepalive")),!1;if(r+=2,r+=1,5===i){var f=I(t,e);if(!f)return!1;r+=f.length}if(o){if("object"!=typeof o)return t.emit("error",new Error("Invalid will")),!1;if(!o.topic||"string"!=typeof o.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(r+=_.byteLength(o.topic)+2,r+=2,o.payload){if(!(0<=o.payload.length))return t.emit("error",new Error("Invalid will payload")),!1;"string"==typeof o.payload?r+=_.byteLength(o.payload):r+=o.payload.length}var p={};if(5===i){if(!(p=I(t,o.properties)))return!1;r+=p.length}}e=!1;if(null!=u){if(!T(u))return t.emit("error",new Error("Invalid username")),!1;e=!0,r+=_.byteLength(u)+2}if(null!=l){if(!e)return t.emit("error",new Error("Username is required to use password")),!1;if(!T(l))return t.emit("error",new Error("Invalid password")),!1;r+=A(l)+2}t.write(y.CONNECT_HEADER),S(t,r),E(t,n),t.write(4===i?y.VERSION4:5===i?y.VERSION5:y.VERSION3);n=0;n|=null!=u?y.USERNAME_MASK:0,n|=null!=l?y.PASSWORD_MASK:0,n|=o&&o.retain?y.WILL_RETAIN_MASK:0,n|=o&&o.qos?o.qos<<y.WILL_QOS_SHIFT:0,n|=o?y.WILL_FLAG_MASK:0,n|=s?y.CLEAN_SESSION_MASK:0,t.write(_.from([n])),w(t,a),5===i&&f.write();E(t,c),o&&(5===i&&p.write(),k(t,o.topic),E(t,o.payload));null!=u&&E(t,u);null!=l&&E(t,l);return!0}(e,t);case"connack":return function(e,t,r){var n=r?r.protocolVersion:4,i=e||{},o=5===n?i.reasonCode:i.returnCode,s=i["properties"],r=2;if("number"!=typeof o)return t.emit("error",new Error("Invalid return code")),!1;e=null;if(5===n){if(!(e=I(t,s)))return!1;r+=e.length}t.write(y.CONNACK_HEADER),S(t,r),t.write(i.sessionPresent?y.SESSIONPRESENT_HEADER:a),t.write(_.from([o])),null!=e&&e.write();return!0}(e,t,r);case"publish":return function(e,t,r){v("publish: packet: %o",e);var n=r?r.protocolVersion:4,i=e||{},o=i.qos||0,s=i.retain?y.RETAIN_MASK:0,a=i["topic"],c=i.payload||f,u=i.messageId,l=i["properties"],r=0;if("string"==typeof a)r+=_.byteLength(a)+2;else{if(!_.isBuffer(a))return t.emit("error",new Error("Invalid topic")),!1;r+=a.length+2}_.isBuffer(c)?r+=c.length:r+=_.byteLength(c);if(o&&"number"!=typeof u)return t.emit("error",new Error("Invalid messageId")),!1;o&&(r+=2);e=null;if(5===n){if(!(e=I(t,l)))return!1;r+=e.length}t.write(y.PUBLISH_HEADER[o][i.dup?1:0][s?1:0]),S(t,r),w(t,A(a)),t.write(a),0<o&&w(t,u);null!=e&&e.write();return v("publish: payload: %o",c),t.write(c)}(e,t,r);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(e,t,r){var n=r?r.protocolVersion:4,i=e||{},o=i.cmd||"puback",s=i.messageId,a=i.dup&&"pubrel"===o?y.DUP_MASK:0,c=0,u=i["reasonCode"],l=i["properties"],e=5===n?3:2;"pubrel"===o&&(c=1);if("number"!=typeof s)return t.emit("error",new Error("Invalid messageId")),!1;i=null;if(5===n&&"object"==typeof l){if(!(i=C(t,l,r,e)))return!1;e+=i.length}t.write(y.ACKS[o][c][a][0]),S(t,e),w(t,s),5===n&&t.write(_.from([u]));null!==i&&i.write();return!0}(e,t,r);case"subscribe":return function(e,t,r){v("subscribe: packet: ");var n=r?r.protocolVersion:4,i=e||{},o=i.dup?y.DUP_MASK:0,r=i.messageId,s=i.subscriptions,e=i["properties"],a=0;if("number"!=typeof r)return t.emit("error",new Error("Invalid messageId")),!1;a+=2;i=null;if(5===n){if(!(i=I(t,e)))return!1;a+=i.length}{if("object"!=typeof s||!s.length)return t.emit("error",new Error("Invalid subscriptions")),!1;for(var c=0;c<s.length;c+=1){var u=s[c].topic,l=s[c].qos;if("string"!=typeof u)return t.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof l)return t.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===n){if("boolean"!=typeof(s[c].nl||!1))return t.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(s[c].rap||!1))return t.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;l=s[c].rh||0;if("number"!=typeof l||2<l)return t.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}a+=_.byteLength(u)+2+1}}v("subscribe: writing to stream: %o",y.SUBSCRIBE_HEADER),t.write(y.SUBSCRIBE_HEADER[1][o?1:0][0]),S(t,a),w(t,r),null!==i&&i.write();for(var f=!0,p=0;p<s.length;p++){var h=s[p],d=h.topic,g=h.qos,b=+h.nl,m=+h.rap,h=h.rh;k(t,d),g=y.SUBSCRIBE_OPTIONS_QOS[g],5===n&&(g|=b?y.SUBSCRIBE_OPTIONS_NL:0,g|=m?y.SUBSCRIBE_OPTIONS_RAP:0,g|=h?y.SUBSCRIBE_OPTIONS_RH[h]:0),f=t.write(_.from([g]))}return f}(e,t,r);case"suback":return function(e,t,r){var n=r?r.protocolVersion:4,i=e||{},o=i.messageId,s=i["granted"],e=i["properties"],a=0;if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;{if(a+=2,"object"!=typeof s||!s.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(var c=0;c<s.length;c+=1){if("number"!=typeof s[c])return t.emit("error",new Error("Invalid qos vector")),!1;a+=1}}i=null;if(5===n){if(!(i=C(t,e,r,a)))return!1;a+=i.length}t.write(y.SUBACK_HEADER),S(t,a),w(t,o),null!==i&&i.write();return t.write(_.from(s))}(e,t,r);case"unsubscribe":return function(e,t,r){var n=r?r.protocolVersion:4,i=e||{},o=i.messageId,r=i.dup?y.DUP_MASK:0,s=i.unsubscriptions,e=i["properties"],a=0;if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;{if(a+=2,"object"!=typeof s||!s.length)return t.emit("error",new Error("Invalid unsubscriptions")),!1;for(var c=0;c<s.length;c+=1){if("string"!=typeof s[c])return t.emit("error",new Error("Invalid unsubscriptions")),!1;a+=_.byteLength(s[c])+2}}i=null;if(5===n){if(!(i=I(t,e)))return!1;a+=i.length}t.write(y.UNSUBSCRIBE_HEADER[1][r?1:0][0]),S(t,a),w(t,o),null!==i&&i.write();for(var u=!0,l=0;l<s.length;l++)u=k(t,s[l]);return u}(e,t,r);case"unsuback":return function(e,t,r){var n=r?r.protocolVersion:4,i=e||{},o=i.messageId,s=i.dup?y.DUP_MASK:0,a=i["granted"],c=i["properties"],e=i.cmd,u=2;if("number"!=typeof o)return t.emit("error",new Error("Invalid messageId")),!1;if(5===n){if("object"!=typeof a||!a.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(var l=0;l<a.length;l+=1){if("number"!=typeof a[l])return t.emit("error",new Error("Invalid qos vector")),!1;u+=1}}i=null;if(5===n){if(!(i=C(t,c,r,u)))return!1;u+=i.length}t.write(y.ACKS[e][0][s][0]),S(t,u),w(t,o),null!==i&&i.write();5===n&&t.write(_.from(a));return!0}(e,t,r);case"pingreq":case"pingresp":return t.write(y.EMPTY[e.cmd]);case"disconnect":return function(e,t,r){var n=r?r.protocolVersion:4,i=e||{},o=i["reasonCode"],s=i["properties"],e=5===n?1:0,i=null;if(5===n){if(!(i=C(t,s,r,e)))return!1;e+=i.length}t.write(_.from([y.codes.disconnect<<4])),S(t,e),5===n&&t.write(_.from([o]));null!==i&&i.write();return!0}(e,t,r);case"auth":return function(e,t,r){var n=r?r.protocolVersion:4,i=e||{},o=i["reasonCode"],e=i["properties"],i=5===n?1:0;5!==n&&t.emit("error",new Error("Invalid mqtt version for auth packet"));r=C(t,e,r,i);if(!r)return!1;i+=r.length,t.write(_.from([y.codes.auth<<4])),S(t,i),t.write(_.from([o])),null!==r&&r.write();return!0}(e,t,r);default:return t.emit("error",new Error("Unknown command")),!1}}function d(e){e.uncork()}Object.defineProperty(h,"cacheNumbers",{get(){return w===m},set(e){w=e?(o&&0!==Object.keys(o).length||(p=!0),m):(p=!1,x)}});var g={};function S(e,t){var r=g[t];r||(r=u(t).data,t<16384&&(g[t]=r)),v("writeVarByteInt: writing to stream: %o",r),e.write(r)}function k(e,t){var r=_.byteLength(t);return w(e,r),v("writeString: %s",t),e.write(t,"utf8")}function b(e,t,r){k(e,t),k(e,r)}function m(e,t){return v("writeNumberCached: number: %d",t),v("writeNumberCached: %o",o[t]),e.write(o[t])}function x(e,t){t=s(t);return v("writeNumberGenerated: %o",t),e.write(t)}function E(e,t){"string"==typeof t?k(e,t):t?(w(e,t.length),e.write(t)):w(e,0)}function I(r,e){if("object"!=typeof e||null!=e.length)return{length:1,write(){j(r,{},0)}};var t=0;function n(e,n){var t=0;switch(y.propertiesTypes[e]){case"byte":if("boolean"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;t+=2;break;case"int8":if("number"!=typeof n||n<0||255<n)return r.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;t+=2;break;case"binary":if(n&&null===n)return r.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;t+=1+_.byteLength(n)+2;break;case"int16":if("number"!=typeof n||n<0||65535<n)return r.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;t+=3;break;case"int32":if("number"!=typeof n||n<0||4294967295<n)return r.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;t+=5;break;case"var":if("number"!=typeof n||n<0||4294967295<n)return r.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;t+=1+u(n).length;break;case"string":if("string"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;t+=3+_.byteLength(n.toString());break;case"pair":if("object"!=typeof n)return r.emit("error",new Error(`Invalid ${e}: ${n}`)),!1;t+=Object.getOwnPropertyNames(n).reduce(function(e,r){var t=n[r];return Array.isArray(t)?e+=t.reduce(function(e,t){return e+=3+_.byteLength(r.toString())+2+_.byteLength(t.toString())},0):e+=3+_.byteLength(r.toString())+2+_.byteLength(n[r].toString()),e},0);break;default:return r.emit("error",new Error(`Invalid property ${e}: ${n}`)),!1}return t}if(e)for(var i in e){var o=0,s=0,a=e[i];if(Array.isArray(a))for(var c=0;c<a.length;c++){if(!(s=n(i,a[c])))return!1;o+=s}else{if(!(s=n(i,a)))return!1;o=s}if(!o)return!1;t+=o}return{length:u(t).length+t,write(){j(r,e,t)}}}function C(e,t,r,n){var i=["reasonString","userProperties"],o=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0,s=I(e,t);if(o)for(;n+s.length>o;){var a=i.shift();if(!a||!t[a])return!1;delete t[a],s=I(e,t)}return s}function O(r,n,i){var e,t;switch(y.propertiesTypes[n]){case"byte":r.write(_.from([y.properties[n]])),r.write(_.from([+i]));break;case"int8":r.write(_.from([y.properties[n]])),r.write(_.from([i]));break;case"binary":r.write(_.from([y.properties[n]])),E(r,i);break;case"int16":r.write(_.from([y.properties[n]])),w(r,i);break;case"int32":r.write(_.from([y.properties[n]])),e=r,t=l(t=i),v("write4ByteNumber: %o",t),e.write(t);break;case"var":r.write(_.from([y.properties[n]])),S(r,i);break;case"string":r.write(_.from([y.properties[n]])),k(r,i);break;case"pair":Object.getOwnPropertyNames(i).forEach(function(t){var e=i[t];Array.isArray(e)?e.forEach(function(e){r.write(_.from([y.properties[n]])),b(r,t.toString(),e.toString())}):(r.write(_.from([y.properties[n]])),b(r,t.toString(),e.toString()))});break;default:return void r.emit("error",new Error(`Invalid property ${n} value: ${i}`))}}function j(e,t,r){for(var n in S(e,r),t)if(t.hasOwnProperty(n)&&null!==t[n]){var i=t[n];if(Array.isArray(i))for(var o=0;o<i.length;o++)O(e,n,i[o]);else O(e,n,i)}}function A(e){return e?e instanceof _?e.length:_.byteLength(e):0}function T(e){return"string"==typeof e||e instanceof _}t.exports=h},{"./constants":91,"./numbers":94,debug:17,"process-nextick-args":100,"safe-buffer":117}],98:[function(e,t,r){var n=36e5,i=864e5;function o(e,t,r,n){t=1.5*r<=t;return`${Math.round(e/r)} ${n}${t?"s":""}`}t.exports=function(e,t){t=t||{};var r=typeof e;if("string"==r&&0<e.length)return function(e){if(!(100<(e=String(e)).length)){e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(e){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return t*i;case"hours":case"hour":case"hrs":case"hr":case"h":return t*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}(e);if("number"==r&&isFinite(e))return(t.long?function(e){var t=Math.abs(e);if(i<=t)return o(e,t,i,"day");if(n<=t)return o(e,t,n,"hour");if(6e4<=t)return o(e,t,6e4,"minute");if(1e3<=t)return o(e,t,1e3,"second");return`${e} ms`}:function(e){var t=Math.abs(e);if(i<=t)return`${Math.round(e/i)}d`;if(n<=t)return`${Math.round(e/n)}h`;if(6e4<=t)return`${Math.round(e/6e4)}m`;if(1e3<=t)return`${Math.round(e/1e3)}s`;return`${e}ms`})(e);throw new Error(`val is not a non-empty string or a valid number. val=${JSON.stringify(e)}`)}},{}],99:[function(e,t,r){e=e("wrappy");function n(e){function t(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))}return t.called=!1,t}function i(e){function t(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)}var r=e.name||"Function wrapped with `once`";return t.onceError=`${r} shouldn't be called more than once`,t.called=!1,t}t.exports=e(n),t.exports.strict=e(i),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value(){return i(this)},configurable:!0})})},{wrappy:138}],100:[function(e,t,r){!function(a){void 0===a||!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return a.nextTick(e);case 2:return a.nextTick(function(){e.call(null,t)});case 3:return a.nextTick(function(){e.call(null,t,r)});case 4:return a.nextTick(function(){e.call(null,t,r,n)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return a.nextTick(function(){e.apply(null,i)})}}}:t.exports=a}.call(this,e("_process"))},{_process:101}],101:[function(e,t,r){var n,i,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}function h(){if(!l){var e=a(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||l||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=g,t.addListener=g,t.once=g,t.off=g,t.removeListener=g,t.removeAllListeners=g,t.emit=g,t.prependListener=g,t.prependOnceListener=g,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],102:[function(e,O,j){!function(C){!function(e){var t,r="object"==typeof j&&j&&!j.nodeType&&j,n="object"==typeof O&&O&&!O.nodeType&&O,i="object"==typeof C&&C;i.global!==i&&i.window!==i&&i.self!==i||(e=i);var o,b=2147483647,m=36,y=26,s=38,a=700,c=/^xn--/,u=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=m-1,_=Math["floor"],v=String.fromCharCode;function w(e){throw new RangeError(f[e])}function h(e,t){for(var r=e["length"],n=[];r--;)n[r]=t(e[r]);return n}function d(e,t){var r=e.split("@"),n="";return 1<r.length&&(n=`${r[0]}@`,e=r[1]),n+h((e=e.replace(l,".")).split("."),t).join(".")}function S(e){for(var t,r,n=[],i=0,o=e["length"];i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function g(e){return h(e,function(e){var t="";return 65535<e&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=v(e)}).join("")}function k(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?_(e/a):e>>1,e+=_(e/t);p*y>>1<e;n+=m)e=_(e/p);return _(n+(p+1)*e/(e+s))}function E(e){var t,r,n,i,o,s,a,c=[],u=e.length,l=0,f=128,p=72,h=e.lastIndexOf("-");for(h<0&&(h=0),r=0;r<h;++r)128<=e.charCodeAt(r)&&w("not-basic"),c.push(e.charCodeAt(r));for(n=0<h?h+1:0;n<u;){for(i=l,o=1,s=m;u<=n&&w("invalid-input"),a=e.charCodeAt(n++),(m<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:m)||a>_((b-l)/o))&&w("overflow"),l+=a*o,!(a<(a=s<=p?1:p+y<=s?y:s-p));s+=m)o>_(b/(a=m-a))&&w("overflow"),o*=a;p=x(l-i,t=c.length+1,0==i),_(l/t)>b-f&&w("overflow"),f+=_(l/t),l%=t,c.splice(l++,0,f)}return g(c)}function I(e){for(var t,r,n,i,o,s,a,c,u,l,f=[],p=(e=S(e)).length,h=128,d=72,g=t=0;g<p;++g)(a=e[g])<128&&f.push(v(a));for(r=n=f.length,n&&f.push("-");r<p;){for(i=b,g=0;g<p;++g)h<=(a=e[g])&&a<i&&(i=a);for(i-h>_((b-t)/(c=r+1))&&w("overflow"),t+=(i-h)*c,h=i,g=0;g<p;++g)if((a=e[g])<h&&++t>b&&w("overflow"),a==h){for(o=t,s=m;!(o<(u=s<=d?1:d+y<=s?y:s-d));s+=m)f.push(v(k(u+(l=o-u)%(u=m-u),0))),o=_(l/u);f.push(v(k(o,0))),d=x(t,c,r==n),t=0,++r}++t,++h}return f.join("")}if(t={version:"1.4.1",ucs2:{decode:S,encode:g},decode:E,encode:I,toASCII:function(e){return d(e,function(e){return u.test(e)?`xn--${I(e)}`:e})},toUnicode:function(e){return d(e,function(e){return c.test(e)?E(e.slice(4).toLowerCase()):e})}},0,r&&n)if(O.exports==r)n.exports=t;else for(o in t)t.hasOwnProperty(o)&&(r[o]=t[o]);else e.punycode=t}(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],103:[function(e,t,r){t.exports=function(e,t,r,n){r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t=t||"&");t=1e3;n&&"number"==typeof n.maxKeys&&(t=n.maxKeys);var s=e.length;0<t&&t<s&&(s=t);for(var a=0;a<s;++a){var c,u=e[a].replace(o,"%20"),l=u.indexOf(r),l=0<=l?(c=u.substr(0,l),u.substr(l+1)):(c=u,""),u=decodeURIComponent(c),l=decodeURIComponent(l);Object.prototype.hasOwnProperty.call(i,u)?f(i[u])?i[u].push(l):i[u]=[i[u],l]:i[u]=l}return i};var f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],104:[function(e,t,r){function o(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(r,n,i,e){return n=n||"&",i=i||"=","object"==typeof(r=null===r?void 0:r)?a(c(r),function(e){var t=encodeURIComponent(o(e))+i;return s(r[e])?a(r[e],function(e){return t+encodeURIComponent(o(e))}).join(n):t+encodeURIComponent(o(r[e]))}).join(n):e?encodeURIComponent(o(e))+i+encodeURIComponent(o(r)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var c=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}},{}],105:[function(e,t,r){r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":103,"./encode":104}],106:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":107}],107:[function(e,t,r){var n=e("process-nextick-args"),i=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r};t.exports=l;t=Object.create(e("core-util-is"));t.inherits=e("inherits");var o=e("./_stream_readable"),s=e("./_stream_writable");t.inherits(l,o);for(var a=i(s.prototype),c=0;c<a.length;c++){var u=a[c];l.prototype[u]||(l.prototype[u]=s.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),l.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},{"./_stream_readable":109,"./_stream_writable":111,"core-util-is":14,inherits:88,"process-nextick-args":100}],108:[function(e,t,r){t.exports=i;var n=e("./_stream_transform"),t=Object.create(e("core-util-is"));function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}t.inherits=e("inherits"),t.inherits(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":110,"core-util-is":14,inherits:88}],109:[function(T,P,e){!function(g,e){var b=T("process-nextick-args");P.exports=i;var o,m=T("isarray");i.ReadableState=n;function y(e,t){return e.listeners(t).length}T("events").EventEmitter;var r=T("./internal/streams/stream"),l=T("safe-buffer")["Buffer"],f=e.Uint8Array||function(){};var t=Object.create(T("core-util-is"));t.inherits=T("inherits");var s,e=T("util"),_=void 0,_=e&&e.debuglog?e.debuglog("stream"):function(){},a=T("./internal/streams/BufferList"),e=T("./internal/streams/destroy");t.inherits(i,r);var c=["error","close","destroy","pause","resume"];function n(e,t){var r=t instanceof(o=o||T("./_stream_duplex"));this.objectMode=!!(e=e||{}).objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,t=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(i||0===i)?i:t,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new a,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s=s||T("string_decoder/").StringDecoder,this.decoder=new s(e.encoding),this.encoding=e.encoding)}function i(e){if(o=o||T("./_stream_duplex"),!(this instanceof i))return new i(e);this._readableState=new n(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),r.call(this)}function u(e,t,r,n,i){var o,s,a,c,u=e._readableState;return null===t?(u.reading=!1,s=e,(a=u).ended||(!a.decoder||(c=a.decoder.end())&&c.length&&(a.buffer.push(c),a.length+=a.objectMode?1:c.length),a.ended=!0,v(s))):(o=!i?function(e,t){var r;(function(e){return l.isBuffer(e)||e instanceof f})(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(u,t):o)?e.emit("error",o):u.objectMode||t&&0<t.length?("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===l.prototype||(o=t,t=l.from(o)),n?u.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):p(e,u,t,!0):u.ended?e.emit("error",new Error("stream.push() after EOF")):(u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?p(e,u,t,!1):S(e,u)):p(e,u,t,!1))):n||(u.reading=!1),!(u=u).ended&&(u.needReadable||u.length<u.highWaterMark||0===u.length)}function p(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&v(e)),S(e,t)}Object.defineProperty(i.prototype,"destroyed",{get(){return void 0!==this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}}),i.prototype.destroy=e.destroy,i.prototype._undestroy=e.undestroy,i.prototype._destroy=function(e,t){this.push(null),t(e)},i.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=""),r=!0),u(this,e,t,!1,r)},i.prototype.unshift=function(e){return u(this,e,null,!0,!1)},i.prototype.isPaused=function(){return!1===this._readableState.flowing},i.prototype.setEncoding=function(e){return s=s||T("string_decoder/").StringDecoder,this._readableState.decoder=new s(e),this._readableState.encoding=e,this};var h=8388608;function d(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(h<=(r=e)?r=h:(r--,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var r}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(_("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?b.nextTick(w,e):w(e))}function w(e){_("emit readable"),e.emit("readable"),I(e)}function S(e,t){t.readingMore||(t.readingMore=!0,b.nextTick(k,e,t))}function k(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(_("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function x(e){_("readable nexttick read 0"),e.read(0)}function E(e,t){t.reading||(_("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(_("flow",t.flowing);t.flowing&&null!==e.read(););}function C(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():(r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=o.slice(s);break}++n}return t.length-=n,i}:function(e,t){var r=l.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=o.slice(s);break}++i}return t.length-=i,r})(e,t);return n}(e,t.buffer,t.decoder),r);var r}function O(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,b.nextTick(j,t,e))}function j(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function A(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}i.prototype.read=function(e){_("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return _("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?O:v)(this),null;if(0===(e=d(e,t))&&t.ended)return 0===t.length&&O(this),null;var n=t.needReadable;return _("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&_("length less than watermark",n=!0),t.ended||t.reading?_("reading or ended",n=!1):n&&(_("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=d(r,t))),null===(n=0<e?C(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&O(this)),null!==n&&this.emit("data",n),n},i.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},i.prototype.pipe=function(r,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=r;break;case 1:i.pipes=[i.pipes,r];break;default:i.pipes.push(r)}i.pipesCount+=1,_("pipe count=%d opts=%j",i.pipesCount,e);e=(!e||!1!==e.end)&&r!==g.stdout&&r!==g.stderr?s:d;function o(e,t){_("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,_("cleanup"),r.removeListener("close",p),r.removeListener("finish",h),r.removeListener("drain",a),r.removeListener("error",f),r.removeListener("unpipe",o),n.removeListener("end",s),n.removeListener("end",d),n.removeListener("data",l),c=!0,!i.awaitDrain||r._writableState&&!r._writableState.needDrain||a())}function s(){_("onend"),r.end()}i.endEmitted?b.nextTick(e):n.once("end",e),r.on("unpipe",o);var t,a=(t=n,function(){var e=t._readableState;_("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&y(t,"data")&&(e.flowing=!0,I(t))});r.on("drain",a);var c=!1;var u=!1;function l(e){_("ondata"),(u=!1)!==r.write(e)||u||((1===i.pipesCount&&i.pipes===r||1<i.pipesCount&&-1!==A(i.pipes,r))&&!c&&(_("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,u=!0),n.pause())}function f(e){_("onerror",e),d(),r.removeListener("error",f),0===y(r,"error")&&r.emit("error",e)}function p(){r.removeListener("finish",h),d()}function h(){_("onfinish"),r.removeListener("close",p),d()}function d(){_("unpipe"),n.unpipe(r)}return n.on("data",l),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?m(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(r,"error",f),r.once("close",p),r.once("finish",h),r.emit("pipe",n),i.flowing||(_("pipe resume"),n.resume()),r},i.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=A(t.pipes,e);return-1===s||(t.pipes.splice(s,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},i.prototype.addListener=i.prototype.on=function(e,t){t=r.prototype.on.call(this,e,t);return"data"===e?!1!==this._readableState.flowing&&this.resume():"readable"===e&&((e=this._readableState).endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.emittedReadable=!1,e.reading?e.length&&v(this):b.nextTick(x,this))),t},i.prototype.resume=function(){var e,t=this._readableState;return t.flowing||(_("resume"),t.flowing=!0,e=this,(t=t).resumeScheduled||(t.resumeScheduled=!0,b.nextTick(E,e,t))),this},i.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e,r=this,n=this._readableState,i=!1;for(e in t.on("end",function(){var e;_("wrapped end"),!n.decoder||n.ended||(e=n.decoder.end())&&e.length&&r.push(e),r.push(null)}),t.on("data",function(e){_("wrapped data"),n.decoder&&(e=n.decoder.write(e)),n.objectMode&&null==e||(n.objectMode||e&&e.length)&&(r.push(e)||(i=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var o=0;o<c.length;o++)t.on(c[o],this.emit.bind(this,c[o]));return this._read=function(e){_("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(i.prototype,"readableHighWaterMark",{enumerable:!1,get(){return this._readableState.highWaterMark}}),i._fromList=C}.call(this,T("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":107,"./internal/streams/BufferList":112,"./internal/streams/destroy":113,"./internal/streams/stream":114,_process:101,"core-util-is":14,events:83,inherits:88,isarray:90,"process-nextick-args":100,"safe-buffer":117,"string_decoder/":119,util:12}],110:[function(e,t,r){t.exports=i;var n=e("./_stream_duplex"),t=Object.create(e("core-util-is"));function i(e){if(!(this instanceof i))return new i(e);n.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,(r.writecb=null)!=t&&this.push(t),n(e),(e=this._readableState).reading=!1,(e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var r=this;"function"==typeof this._flush?this._flush(function(e,t){s(r,e,t)}):s(this,null,null)}function s(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.inherits=e("inherits"),t.inherits(i,n),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r,n.writechunk=e,n.writeencoding=t,n.transforming||(t=this._readableState,(n.needTransform||t.needReadable||t.length<t.highWaterMark)&&this._read(t.highWaterMark))},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},{"./_stream_duplex":107,"core-util-is":14,inherits:88}],111:[function(w,S,e){!function(e,t,r){var p=w("process-nextick-args");function l(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e["entry"];e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}S.exports=u;var s,a=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?r:p.nextTick;u.WritableState=c;r=Object.create(w("core-util-is"));r.inherits=w("inherits");var n={deprecate:w("util-deprecate")},i=w("./internal/streams/stream"),h=w("safe-buffer")["Buffer"],d=t.Uint8Array||function(){};var o,t=w("./internal/streams/destroy");function g(){}function c(e,o){s=s||w("./_stream_duplex");var t=o instanceof s;this.objectMode=!!(e=e||{}).objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=e.writableHighWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:t&&(n||0===n)?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;i=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){var t,r,n,i;r=e,n=(t=o)._writableState,i=n.sync,e=n.writecb,function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),r?function(e,t,r,n,i){--t.pendingcb,r?(p.nextTick(i,n),p.nextTick(v,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),v(e,t))}(t,n,i,r,e):((r=y(n))||n.corked||n.bufferProcessing||!n.bufferedRequest||m(t,n),i?a(f,t,n,r,e):f(t,n,r,e))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function u(e){if(s=s||w("./_stream_duplex"),!(o.call(u,this)||this instanceof s))return new u(e);this._writableState=new c(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function b(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function f(e,t,r,n){var i;r||(i=e,0===(r=t).length&&r.needDrain&&(r.needDrain=!1,i.emit("drain"))),t.pendingcb--,n(),v(e,t)}function m(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),n=t.corkedRequestsFree;n.entry=r;for(var o=0,s=!0;r;)(i[o]=r).isBuf||(s=!1),r=r.next,o+=1;i.allBuffers=s,b(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new l(t),t.bufferedRequestCount=0}else{for(;r;){var a=r["chunk"],c=r["encoding"],u=r.callback;if(b(e,t,!1,t.objectMode?1:a.length,a,c,u),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(t,r){t._final(function(e){r.pendingcb--,e&&t.emit("error",e),r.prefinished=!0,t.emit("prefinish"),v(t,r)})}function v(e,t){var r,n,i=y(t);return i&&(r=e,(n=t).prefinished||n.finalCalled||("function"==typeof r._final?(n.pendingcb++,n.finalCalled=!0,p.nextTick(_,r,n)):(n.prefinished=!0,r.emit("prefinish"))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}r.inherits(u,i),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value(e){return!!o.call(this,e)||this===u&&(e&&e._writableState instanceof c)}})):o=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,r){var n,i,o,s,a,c,u=this._writableState,l=!1,f=!u.objectMode&&(i=e,h.isBuffer(i)||i instanceof d);return f&&!h.isBuffer(e)&&(o=e,e=h.from(o)),"function"==typeof t&&(r=t,t=null),t=f?"buffer":t||u.defaultEncoding,"function"!=typeof r&&(r=g),u.ended?(s=this,a=r,c=new Error("write after end"),s.emit("error",c),p.nextTick(a,c)):(f||(n=this,i=u,o=r,a=!(s=!0),null===(c=e)?a=new TypeError("May not write null values to stream"):"string"==typeof c||void 0===c||i.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(n.emit("error",a),p.nextTick(o,a),s=!1),s))&&(u.pendingcb++,l=function(e,t,r,n,i,o){r||(c=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,r));return t}(t,n,i),n!==c&&(r=!0,i="buffer",n=c));var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;a||(t.needDrain=!0);{var c;t.writing||t.corked?(c=t.lastBufferedRequest,t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):b(e,t,!1,s,n,i,o)}return a}(this,u,f,e,t,r)),l},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(`${e}`.toLowerCase())))throw new TypeError(`Unknown encoding: ${e}`);return this._writableState.defaultEncoding=e,this},Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get(){return this._writableState.highWaterMark}}),u.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,v(e,t),r&&(t.finished?p.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Object.defineProperty(u.prototype,"destroyed",{get(){return void 0!==this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=t.destroy,u.prototype._undestroy=t.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}.call(this,w("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},w("timers").setImmediate)},{"./_stream_duplex":107,"./internal/streams/destroy":113,"./internal/streams/stream":114,_process:101,"core-util-is":14,inherits:88,"process-nextick-args":100,"safe-buffer":117,timers:120,"util-deprecate":134}],112:[function(e,t,r){var s=e("safe-buffer")["Buffer"],n=e("util");function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0}t.exports=(i.prototype.push=function(e){e={data:e,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},i.prototype.unshift=function(e){e={data:e,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=`${t.data}`;t=t.next;)r+=e+t.data;return r},i.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n=s.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=i.data,r=o,t.copy(n,r),o+=i.data.length,i=i.next;return n},i),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return`${this.constructor.name} ${e}`})},{"safe-buffer":117,util:12}],113:[function(e,t,r){var o=e("process-nextick-args");function s(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||o.nextTick(s,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(o.nextTick(s,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":100}],114:[function(e,t,r){t.exports=e("events").EventEmitter},{events:83}],115:[function(e,t,r){(((r=t.exports=e("./lib/_stream_readable.js")).Stream=r).Readable=r).Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":107,"./lib/_stream_passthrough.js":108,"./lib/_stream_readable.js":109,"./lib/_stream_transform.js":110,"./lib/_stream_writable.js":111}],116:[function(e,t,r){function n(e,t,r){var n=this;this._callback=e,this._args=r,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e=e||n._interval,n._interval&&clearInterval(n._interval),n._interval=setInterval(n._callback,e,n._args)},this.clear=function(){n._interval&&(clearInterval(n._interval),n._interval=void 0)},this.destroy=function(){n._interval&&clearInterval(n._interval),n._callback=void 0,n._interval=void 0,n._args=void 0}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");if(0<arguments.length)for(var e=new Array(arguments.length-2),t=0;t<e.length;t++)e[t]=arguments[t+2];return new n(arguments[0],arguments[1],e)}},{}],117:[function(e,t,r){var n=e("buffer"),i=n["Buffer"];function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,r),r.Buffer=s),o(i,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=i(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:13}],118:[function(e,t,r){t.exports=function(e){var t=e._readableState;return t?t.objectMode||"number"==typeof e._duplexState?e.read():e.read(function(e){if(e.buffer.length)return(e.buffer.head?e.buffer.head.data:e.buffer[0]).length;return e.length}(t)):null}},{}],119:[function(e,t,r){var n=e("safe-buffer")["Buffer"],i=n.isEncoding||function(e){switch((e=`${e}`)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=`${e}`.toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===i||!i(e)))throw new Error(`Unknown encoding: ${e}`);return t||e}function s(e){var t;switch(this.encoding=o(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=f,this.end=p,t=3;break;default:return this.write=h,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e){var t,r,n=this.lastTotal-this.lastNeed,t=(t=this,128!=(192&(r=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<r.length?128!=(192&r[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<r.length&&128!=(192&r[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==t?t:this.lastNeed<=e.length?(e.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,n,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var r=e.toString("utf16le",t);if(r){t=r.charCodeAt(r.length-1);if(55296<=t&&t<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){e=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,e)}return t}function f(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(r.StringDecoder=s).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?`${e}\ufffd`:e},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=a(t[n]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(0<=(i=a(t[n])))return 0<i&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(0<=(i=a(t[n])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;r=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":117}],120:[function(c,e,u){!function(e,t){var n=c("process/browser.js")["nextTick"],r=Function.prototype["apply"],i=Array.prototype["slice"],o={},s=0;function a(e,t){this._id=e,this._clearFn=t}u.setTimeout=function(){return new a(r.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new a(r.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(e){e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},u.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},u._unrefActive=u.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},u.setImmediate="function"==typeof e?e:function(e){var t=s++,r=!(arguments.length<2)&&i.call(arguments,1);return o[t]=!0,n(function(){o[t]&&(r?e.apply(null,r):e.call(null),u.clearImmediate(t))}),t},u.clearImmediate="function"==typeof t?t:function(e){delete o[e]}}.call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":101,timers:120}],121:[function(e,t,r){var n=e("../prototype/is");t.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},{"../prototype/is":128}],122:[function(e,t,r){function n(e,t){return e.replace("%v",a(t))}var i=e("../value/is"),o=e("../object/is"),s=e("../string/coerce"),a=e("./to-short-string");t.exports=function(e,t,r){if(!o(r))throw new TypeError(n(t,e));if(!i(e)){if("default"in r)return r.default;if(r.isOptional)return null}r=s(r.errorMessage);throw i(r)||(r=t),new TypeError(n(r,e))}},{"../object/is":125,"../string/coerce":129,"../value/is":131,"./to-short-string":124}],123:[function(e,t,r){t.exports=function(t){try{return t.toString()}catch(e){try{return String(t)}catch(e){return null}}}},{}],124:[function(e,t,r){var n=e("./safe-to-string"),i=/[\n\r\u2028\u2029]/g;t.exports=function(e){e=n(e);return null===e?"<Non-coercible to string value>":e=(e=100<e.length?`${e.slice(0,99)}`:e).replace(i,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})}},{"./safe-to-string":123}],125:[function(e,t,r){var n=e("../value/is"),i={object:!0,function:!0,undefined:!0};t.exports=function(e){return!!n(e)&&hasOwnProperty.call(i,typeof e)}},{"../value/is":131}],126:[function(e,t,r){var n=e("../lib/resolve-exception"),i=e("./is");t.exports=function(e){return i(e)?e:n(e,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":122,"./is":127}],127:[function(e,t,r){var n=e("../function/is"),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;t.exports=function(e){return!!n(e)&&!i.test(o.call(e))}},{"../function/is":121}],128:[function(e,t,r){var n=e("../object/is");t.exports=function(e){if(!n(e))return!1;try{return e.constructor?e.constructor.prototype===e:!1}catch(e){return!1}}},{"../object/is":125}],129:[function(e,t,r){var n=e("../value/is"),i=e("../object/is"),o=Object.prototype.toString;t.exports=function(e){if(!n(e))return null;if(i(e)){var t=e.toString;if("function"!=typeof t)return null;if(t===o)return null}try{return`${e}`}catch(e){return null}}},{"../object/is":125,"../value/is":131}],130:[function(e,t,r){var n=e("../lib/resolve-exception"),i=e("./is");t.exports=function(e){return i(e)?e:n(e,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":122,"./is":131}],131:[function(e,t,r){t.exports=function(e){return null!=e}},{}],132:[function(e,t,r){var I=e("punycode"),C=e("./util");function w(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}r.parse=i,r.resolve=function(e,t){return i(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?i(e,!1,!0).resolveObject(t):t},r.format=function(e){C.isString(e)&&(e=i(e));return e instanceof w?e.format():w.prototype.format.call(e)},r.Url=w;var O=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,j=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),A=["'"].concat(r),T=["%","/","?",";","#"].concat(A),P=["/","?","#"],M=/^[+a-z0-9A-Z_-]{0,63}$/,B=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},N={javascript:!0,"javascript:":!0},U={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},L=e("querystring");function i(e,t,r){if(e&&C.isObject(e)&&e instanceof w)return e;var n=new w;return n.parse(e,t,r),n}w.prototype.parse=function(e,t,r){if(!C.isString(e))throw new TypeError(`Parameter 'url' must be a string, not ${typeof e}`);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",n=e.split(i);n[0]=n[0].replace(/\\/g,"/");var o=(o=e=n.join(i)).trim();if(!r&&1===e.split("#").length){var s=j.exec(o);if(s)return this.path=o,this.href=o,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?L.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var a,s=O.exec(o);if(s&&(E=(s=s[0]).toLowerCase(),this.protocol=E,o=o.substr(s.length)),(r||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(a="//"===o.substr(0,2))||s&&N[s]||(o=o.substr(2),this.slashes=!0)),!N[s]&&(a||s&&!U[s])){for(var c=-1,u=0;u<P.length;u++)-1!==(l=o.indexOf(P[u]))&&(-1===c||l<c)&&(c=l);-1!==(w=-1===c?o.lastIndexOf("@"):o.lastIndexOf("@",c))&&(S=o.slice(0,w),o=o.slice(w+1),this.auth=decodeURIComponent(S));for(var l,c=-1,u=0;u<T.length;u++)-1!==(l=o.indexOf(T[u]))&&(-1===c||l<c)&&(c=l);-1===c&&(c=o.length),this.host=o.slice(0,c),o=o.slice(c),this.parseHost(),this.hostname=this.hostname||"";var f="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!f)for(var p=this.hostname.split(/\./),u=0,h=p.length;u<h;u++){var d=p[u];if(d&&!d.match(M)){for(var g="",b=0,m=d.length;b<m;b++)127<d.charCodeAt(b)?g+="x":g+=d[b];if(!g.match(M)){var y=p.slice(0,u),_=p.slice(u+1),v=d.match(B);v&&(y.push(v[1]),_.unshift(v[2])),_.length&&(o=`/${_.join(".")}${o}`),this.hostname=y.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),f||(this.hostname=I.toASCII(this.hostname));var w=this.port?`:${this.port}`:"",S=this.hostname||"";this.host=S+w,this.href+=this.host,f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o=`/${o}`))}if(!R[E])for(u=0,h=A.length;u<h;u++){var k,x=A[u];-1!==o.indexOf(x)&&((k=encodeURIComponent(x))===x&&(k=escape(x)),o=o.split(x).join(k))}f=o.indexOf("#");-1!==f&&(this.hash=o.substr(f),o=o.slice(0,f));var E,f=o.indexOf("?");return-1!==f?(this.search=o.substr(f),this.query=o.substr(f+1),t&&(this.query=L.parse(this.query)),o=o.slice(0,f)):t&&(this.search="",this.query={}),o&&(this.pathname=o),U[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(w=this.pathname||"",E=this.search||"",this.path=w+E),this.href=this.format(),this},w.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:`[${this.hostname}]`),this.port&&(i+=`:${this.port}`)),this.query&&C.isObject(this.query)&&Object.keys(this.query).length&&(o=L.stringify(this.query));o=this.search||o&&`?${o}`||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||U[t])&&!1!==i?(i=`//${i||""}`,r&&"/"!==r.charAt(0)&&(r=`/${r}`)):i=i||"",n&&"#"!==n.charAt(0)&&(n=`#${n}`),o&&"?"!==o.charAt(0)&&(o=`?${o}`),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(o=o.replace("#","%23"))+n},w.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},w.prototype.resolveObject=function(e){C.isString(e)&&((h=new w).parse(e,!1,!0),e=h);for(var t=new w,r=Object.keys(this),n=0;n<r.length;n++){var i=r[n];t[i]=this[i]}if(t.hash=e.hash,""===e.href)return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),s=0;s<o.length;s++){var a=o[s];"protocol"!==a&&(t[a]=e[a])}return U[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!U[e.protocol]){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];t[l]=e[l]}return t.href=t.format(),t}if(t.protocol=e.protocol,e.host||N[e.protocol])t.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),t.pathname=f.join("/")}return t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(d=t.pathname||"",g=t.search||"",t.path=d+g),t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var p=t.pathname&&"/"===t.pathname.charAt(0),h=e.host||e.pathname&&"/"===e.pathname.charAt(0),d=h||p||t.host&&e.pathname,g=d,b=t.pathname&&t.pathname.split("/")||[],f=e.pathname&&e.pathname.split("/")||[],p=t.protocol&&!U[t.protocol];if(p&&(t.hostname="",t.port=null,t.host&&(""===b[0]?b[0]=t.host:b.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),d=d&&(""===f[0]||""===b[0])),h)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,b=f;else if(f.length)(b=b||[]).pop(),b=b.concat(f),t.search=e.search,t.query=e.query;else if(!C.isNullOrUndefined(e.search))return p&&(t.hostname=t.host=b.shift(),(v=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=v.shift(),t.host=t.hostname=v.shift())),t.search=e.search,t.query=e.query,C.isNull(t.pathname)&&C.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(!b.length)return t.pathname=null,t.search?t.path=`/${t.search}`:t.path=null,t.href=t.format(),t;for(var m=b.slice(-1)[0],h=(t.host||e.host||1<b.length)&&("."===m||".."===m)||""===m,y=0,_=b.length;0<=_;_--)"."===(m=b[_])?b.splice(_,1):".."===m?(b.splice(_,1),y++):y&&(b.splice(_,1),y--);if(!d&&!g)for(;y--;)b.unshift("..");!d||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),h&&"/"!==b.join("/").substr(-1)&&b.push("");var v,h=""===b[0]||b[0]&&"/"===b[0].charAt(0);return p&&(t.hostname=t.host=!h&&b.length?b.shift():"",(v=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=v.shift(),t.host=t.hostname=v.shift())),(d=d||t.host&&b.length)&&!h&&b.unshift(""),b.length?t.pathname=b.join("/"):(t.pathname=null,t.path=null),C.isNull(t.pathname)&&C.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t},w.prototype.parseHost=function(){var e=this["host"],t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":133,punycode:102,querystring:105}],133:[function(e,t,r){t.exports={isString(e){return"string"==typeof e},isObject(e){return"object"==typeof e&&null!==e},isNull(e){return null===e},isNullOrUndefined(e){return null==e}}},{}],134:[function(e,r,t){!function(t){function n(e){try{if(!t.localStorage)return}catch(e){return}e=t.localStorage[e];return null!=e&&"true"===String(e).toLowerCase()}r.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],135:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function r(){}r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],136:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],137:[function(I,e,C){!function(n,i){var a=/%[sdj%]/g;C.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,o=String(e).replace(a,function(e){if("%%"===e)return"%";if(i<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<i;s=n[++r])g(s)||!v(s)?o+=` ${s}`:o+=` ${c(s)}`;return o},C.deprecate=function(e,t){if(y(i.process))return function(){return C.deprecate(e,t).apply(this,arguments)};if(!0===n.noDeprecation)return e;var r=!1;return function(){if(!r){if(n.throwDeprecation)throw new Error(t);n.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}};var e,o={};function c(e,t){var r={seen:[],stylize:u};return 3<=arguments.length&&(r.depth=arguments[2]),4<=arguments.length&&(r.colors=arguments[3]),d(t)?r.showHidden=t:t&&C._extend(r,t),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),l(r,e,r.depth)}function s(e,t){t=c.styles[t];return t?`\u001b[${c.colors[t][0]}m${e}\u001b[${c.colors[t][1]}m`:e}function u(e,t){return e}function l(t,r,n){if(t.customInspect&&r&&k(r.inspect)&&r.inspect!==C.inspect&&(!r.constructor||r.constructor.prototype!==r)){var e=r.inspect(n,t);return e=!m(e)?l(t,e,n):e}var i=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var r=`'${JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')}'`;return e.stylize(r,"string")}return b(t)?e.stylize(`${t}`,"number"):d(t)?e.stylize(`${t}`,"boolean"):g(t)?e.stylize("null","null"):void 0}(t,r);if(i)return i;var o,e=Object.keys(r),s=(o={},e.forEach(function(e,t){o[e]=!0}),o);if(t.showHidden&&(e=Object.getOwnPropertyNames(r)),S(r)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return f(r);if(0===e.length){if(k(r)){var a=r.name?`: ${r.name}`:"";return t.stylize(`[Function${a}]`,"special")}if(_(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return t.stylize(Date.prototype.toString.call(r),"date");if(S(r))return f(r)}var i="",c=!1,a=["{","}"];return h(r)&&(c=!0,a=["[","]"]),k(r)&&(i=` [Function${r.name?`: ${r.name}`:""}]`),_(r)&&(i=` ${RegExp.prototype.toString.call(r)}`),w(r)&&(i=` ${Date.prototype.toUTCString.call(r)}`),S(r)&&(i=` ${f(r)}`),0!==e.length||c&&0!=r.length?n<0?_(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),e=c?function(t,r,n,i,e){for(var o=[],s=0,a=r.length;s<a;++s)E(r,String(s))?o.push(p(t,r,n,i,String(s),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(p(t,r,n,i,e,!0))}),o}(t,r,n,s,e):e.map(function(e){return p(t,r,n,s,e,c)}),t.seen.pop(),function(e,t,r){if(60<e.reduce(function(e,t){return 0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return`${r[0]+(""===t?"":`${t}\n `)} ${e.join(",\n  ")} ${r[1]}`;return`${r[0]+t} ${e.join(", ")} ${r[1]}`}(e,i,a)):a[0]+i+a[1]}function f(e){return`[${Error.prototype.toString.call(e)}]`}function p(e,t,r,n,i,o){var s,a,t=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]};if(t.get?a=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(a=e.stylize("[Setter]","special")),E(n,i)||(s=`[${i}]`),a||(e.seen.indexOf(t.value)<0?-1<(a=g(r)?l(e,t.value,null):l(e,t.value,r-1)).indexOf("\n")&&(a=o?a.split("\n").map(function(e){return`  ${e}`}).join("\n").substr(2):`\n${a.split("\n").map(function(e){return`   ${e}`}).join("\n")}`):a=e.stylize("[Circular]","special")),y(s)){if(o&&i.match(/^\d+$/))return a;s=(s=JSON.stringify(`${i}`)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(s,"string"))}return`${s}: ${a}`}function h(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function g(e){return null===e}function b(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function _(e){return v(e)&&"[object RegExp]"===t(e)}function v(e){return"object"==typeof e&&null!==e}function w(e){return v(e)&&"[object Date]"===t(e)}function S(e){return v(e)&&("[object Error]"===t(e)||e instanceof Error)}function k(e){return"function"==typeof e}function t(e){return Object.prototype.toString.call(e)}function r(e){return e<10?`0${e.toString(10)}`:e.toString(10)}C.debuglog=function(t){var r;return y(e)&&(e=n.env.NODE_DEBUG||""),t=t.toUpperCase(),o[t]||(new RegExp(`\\b${t}\\b`,"i").test(e)?(r=n["pid"],o[t]=function(){var e=C.format.apply(C,arguments);console.error("%s %d: %s",t,r,e)}):o[t]=function(){}),o[t]},(C.inspect=c).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},C.isArray=h,C.isBoolean=d,C.isNull=g,C.isNullOrUndefined=function(e){return null==e},C.isNumber=b,C.isString=m,C.isSymbol=function(e){return"symbol"==typeof e},C.isUndefined=y,C.isRegExp=_,C.isObject=v,C.isDate=w,C.isError=S,C.isFunction=k,C.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},C.isBuffer=I("./support/isBuffer");var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[r(e.getHours()),r(e.getMinutes()),r(e.getSeconds())].join(":"),[e.getDate(),x[e.getMonth()],t].join(" ")),C.format.apply(C,arguments))},C.inherits=I("inherits"),C._extend=function(e,t){if(!t||!v(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}.call(this,I("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":136,_process:101,inherits:135}],138:[function(e,t,r){t.exports=function e(i,t){if(i&&t)return e(i)(t);if("function"!=typeof i)throw new TypeError("need wrapper function");Object.keys(i).forEach(function(e){r[e]=i[e]});return r;function r(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];var r=i.apply(this,e),n=e[e.length-1];return"function"==typeof r&&r!==n&&Object.keys(n).forEach(function(e){r[e]=n[e]}),r}}},{}],139:[function(e,t,r){t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],140:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r,n=arguments[t];for(r in n)i.call(n,r)&&(e[r]=n[r])}return e};var i=Object.prototype["hasOwnProperty"]},{}]},{},[9])(9)});